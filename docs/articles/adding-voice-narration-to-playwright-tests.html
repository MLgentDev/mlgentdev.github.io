<!DOCTYPE html><!--6ddNZCJZAlFcSAgLwthWS--><html lang="en" class="h-full antialiased"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="/_next/static/media/avatar.a0220c64.jpg"/><link rel="stylesheet" href="/_next/static/css/f7f55f29058f52ce.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-a36efa9c3a6b52b3.js"/><script src="/_next/static/chunks/4bd1b696-096d35a2bd1da3af.js" async=""></script><script src="/_next/static/chunks/794-c55d2d695fbb2f2e.js" async=""></script><script src="/_next/static/chunks/main-app-79b5428a09ca2036.js" async=""></script><script src="/_next/static/chunks/c16f53c3-d1dc27298ca4c9c2.js" async=""></script><script src="/_next/static/chunks/500-5d45efbf86b8d36e.js" async=""></script><script src="/_next/static/chunks/437-ada648f38726907a.js" async=""></script><script src="/_next/static/chunks/599-fb57cafa2e73e4e9.js" async=""></script><script src="/_next/static/chunks/app/layout-5b8e43ba4735418d.js" async=""></script><script src="/_next/static/chunks/app/articles/adding-voice-narration-to-playwright-tests/page-9f73da5d3cf68b7d.js" async=""></script><link rel="preload" href="https://web-analytics.mlgent.dev/script.js" as="script"/><title>Add Voice Narration to Your Playwright Tutorial Tests - MLgentDev</title><meta name="description" content="How to add TTS narration to Playwright tutorial tests with two backends: Web Speech API for live previews and edge-tts for producing narrated video artifacts."/><link rel="alternate" type="application/rss+xml" href="https://mlgent.dev/feed.xml"/><meta property="og:title" content="Add Voice Narration to Your Playwright Tutorial Tests"/><meta property="og:description" content="How to add TTS narration to Playwright tutorial tests with two backends: Web Speech API for live previews and edge-tts for producing narrated video artifacts."/><meta property="og:url" content="https://mlgent.dev/articles/adding-voice-narration-to-playwright-tutorials"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2026-02-23"/><meta property="article:author" content="MLgentDev"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Add Voice Narration to Your Playwright Tutorial Tests"/><meta name="twitter:description" content="How to add TTS narration to Playwright tutorial tests with two backends: Web Speech API for live previews and edge-tts for producing narrated video artifacts."/><link rel="icon" href="/favicon.ico?702e0b6334c10139" type="image/x-icon" sizes="48x48"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="flex h-full bg-zinc-50 dark:bg-black"><div hidden=""><!--$--><!--/$--></div><script>((a,b,c,d,e,f,g,h)=>{let i=document.documentElement,j=["light","dark"];function k(b){var c;(Array.isArray(a)?a:[a]).forEach(a=>{let c="class"===a,d=c&&f?e.map(a=>f[a]||a):e;c?(i.classList.remove(...d),i.classList.add(f&&f[b]?f[b]:b)):i.setAttribute(a,b)}),c=b,h&&j.includes(c)&&(i.style.colorScheme=c)}if(d)k(d);else try{let a=localStorage.getItem(b)||c,d=g&&"system"===a?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a;k(d)}catch(a){}})("class","theme","system",null,["light","dark"],null,true,true)</script><div class="flex w-full"><div class="fixed inset-0 flex justify-center sm:px-8"><div class="flex w-full max-w-7xl lg:px-8"><div class="w-full bg-white ring-1 ring-zinc-100 dark:bg-zinc-900 dark:ring-zinc-300/20"></div></div></div><div class="relative flex w-full flex-col"><header class="pointer-events-none relative z-50 flex flex-none flex-col" style="height:var(--header-height);margin-bottom:var(--header-mb)"><div class="top-0 z-10 h-16 pt-6" style="position:var(--header-position)"><div class="sm:px-8 top-(--header-top,--spacing(6)) w-full" style="position:var(--header-inner-position)"><div class="mx-auto w-full max-w-7xl lg:px-8"><div class="relative px-4 sm:px-8 lg:px-12"><div class="mx-auto max-w-2xl lg:max-w-5xl"><div class="relative flex gap-4"><div class="flex flex-1"><div class="h-10 w-10 rounded-full bg-white/90 p-0.5 shadow-lg ring-1 shadow-zinc-800/5 ring-zinc-900/5 backdrop-blur-sm dark:bg-zinc-800/90 dark:ring-white/10"><a aria-label="Home" class="pointer-events-auto" href="/"><img alt="" width="400" height="400" decoding="async" data-nimg="1" class="rounded-full bg-zinc-100 object-cover dark:bg-zinc-800 h-9 w-9" style="color:transparent" src="/_next/static/media/avatar.a0220c64.jpg"/></a></div></div><div class="flex flex-1 justify-end md:justify-center"><div class="pointer-events-auto md:hidden" data-headlessui-state=""><button class="group flex items-center rounded-full bg-white/90 px-4 py-2 text-sm font-medium text-zinc-800 shadow-lg ring-1 shadow-zinc-800/5 ring-zinc-900/5 backdrop-blur-sm dark:bg-zinc-800/90 dark:text-zinc-200 dark:ring-white/10 dark:hover:ring-white/20" type="button" aria-expanded="false" data-headlessui-state="">Menu<svg viewBox="0 0 8 6" aria-hidden="true" class="ml-3 h-auto w-2 stroke-zinc-500 group-hover:stroke-zinc-700 dark:group-hover:stroke-zinc-400"><path d="M1.75 1.75 4 4.25l2.25-2.5" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div><span hidden="" style="position:fixed;top:1px;left:1px;width:1px;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none"></span><nav class="pointer-events-auto hidden md:block"><ul class="flex rounded-full bg-white/90 px-3 text-sm font-medium text-zinc-800 shadow-lg ring-1 shadow-zinc-800/5 ring-zinc-900/5 backdrop-blur-sm dark:bg-zinc-800/90 dark:text-zinc-200 dark:ring-white/10"><li><a class="relative block px-3 py-2 transition hover:text-teal-500 dark:hover:text-teal-400" href="/">Home</a></li><li><a class="relative block px-3 py-2 transition hover:text-teal-500 dark:hover:text-teal-400" href="/about">About</a></li><li><a class="relative block px-3 py-2 transition hover:text-teal-500 dark:hover:text-teal-400" href="/articles">Articles</a></li></ul></nav></div><div class="flex justify-end md:flex-1"><div class="pointer-events-auto"><button type="button" aria-label="Toggle theme" class="group rounded-full bg-white/90 px-3 py-2 shadow-lg ring-1 shadow-zinc-800/5 ring-zinc-900/5 backdrop-blur-sm transition dark:bg-zinc-800/90 dark:ring-white/10 dark:hover:ring-white/20"><svg viewBox="0 0 24 24" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" class="h-6 w-6 fill-zinc-100 stroke-zinc-500 transition group-hover:fill-zinc-200 group-hover:stroke-zinc-700 dark:hidden [@media(prefers-color-scheme:dark)]:fill-teal-50 [@media(prefers-color-scheme:dark)]:stroke-teal-500 [@media(prefers-color-scheme:dark)]:group-hover:fill-teal-50 [@media(prefers-color-scheme:dark)]:group-hover:stroke-teal-600"><path d="M8 12.25A4.25 4.25 0 0 1 12.25 8v0a4.25 4.25 0 0 1 4.25 4.25v0a4.25 4.25 0 0 1-4.25 4.25v0A4.25 4.25 0 0 1 8 12.25v0Z"></path><path d="M12.25 3v1.5M21.5 12.25H20M18.791 18.791l-1.06-1.06M18.791 5.709l-1.06 1.06M12.25 20v1.5M4.5 12.25H3M6.77 6.77 5.709 5.709M6.77 17.73l-1.061 1.061" fill="none"></path></svg><svg viewBox="0 0 24 24" aria-hidden="true" class="hidden h-6 w-6 fill-zinc-700 stroke-zinc-500 transition not-[@media_(prefers-color-scheme:dark)]:fill-teal-400/10 not-[@media_(prefers-color-scheme:dark)]:stroke-teal-500 dark:block [@media(prefers-color-scheme:dark)]:group-hover:stroke-zinc-400"><path d="M17.25 16.22a6.937 6.937 0 0 1-9.47-9.47 7.451 7.451 0 1 0 9.47 9.47ZM12.75 7C17 7 17 2.75 17 2.75S17 7 21.25 7C17 7 17 11.25 17 11.25S17 7 12.75 7Z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div></div></div></div></div></div></div></div></header><main class="flex-auto"><div class="sm:px-8 mt-16 lg:mt-32"><div class="mx-auto w-full max-w-7xl lg:px-8"><div class="relative px-4 sm:px-8 lg:px-12"><div class="mx-auto max-w-2xl lg:max-w-5xl"><div class="xl:relative"><div class="mx-auto max-w-2xl"><article><header class="flex flex-col"><h1 class="mt-6 text-4xl font-bold tracking-tight text-zinc-800 sm:text-5xl dark:text-zinc-100">Add Voice Narration to Your Playwright Tutorial Tests</h1><time dateTime="2026-02-23" class="order-first flex items-center text-base text-zinc-400 dark:text-zinc-500"><span class="h-4 w-0.5 rounded-full bg-zinc-200 dark:bg-zinc-500"></span><span class="ml-3">February 23, 2026</span></time></header><div class="mt-8 prose dark:prose-invert" data-mdx-content="true"><img alt="Playwright -&gt; Tests -&gt; Driver.js -&gt; Audio -&gt; Tutorials" loading="lazy" width="1024" height="559" decoding="async" data-nimg="1" style="color:transparent" src="/_next/static/media/playwright-audio.02910582.png"/>
<h2>TL;DR</h2>
<p>Add <code>speech</code> fields to your Playwright tutorial highlights and a <code>speak()</code> call or two. Set <code>TTS=edge-tts</code> and your silent walkthroughs become narrated videos with Microsoft neural voices, merged via ffmpeg.</p>
<div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden"><iframe src="https://www.youtube.com/embed/xklIhG1DgyM" title="Playwright Tutorial Tests with Voice Narration" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen="" style="position:absolute;top:0;left:0;width:100%;height:100%;border-radius:1rem"></iframe></div>
<p>Source code: <a href="https://github.com/MLgentDev/playwright-tests-as-tutorials">MLgentDev/playwright-tests-as-tutorials</a></p>
<h2>Intro</h2>
<p>In the <a href="/articles/playwright-tests-as-tutorials">previous post</a> we turned Playwright tests into visual tutorials by injecting Driver.js overlays at runtime. One environment variable flips between fast CI tests and headed walkthroughs with spotlighted elements and popovers.</p>
<p>The result is useful but silent. The recorded videos show overlays appearing and disappearing without any spoken context. Popovers vanish after three seconds, and anyone watching the recording later has to pause and squint to read them. For onboarding videos, accessibility, or async demos, you really want a voice explaining what&#x27;s happening.</p>
<p>This post adds voice narration to the same system. The test code barely changes: a <code>speech</code> field on highlights and a standalone <code>speak()</code> call. But the output goes from silent screen recording to narrated video with Microsoft neural voices.</p>
<h2>The problem with silent tutorials</h2>
<p>The overlay-based tutorials from post one work well when you&#x27;re watching live. But they fall short once you&#x27;re not in the room.</p>
<p>Recorded videos lose context. Popovers are on screen for three seconds. In a recording, the viewer can&#x27;t pause the overlay or re-read the text at their own pace. Screen readers can&#x27;t access Driver.js popovers either, since they&#x27;re injected DOM elements with no ARIA semantics. And when you share a tutorial video in a Slack thread or embed it in docs, there&#x27;s nobody present to explain what&#x27;s happening.</p>
<h2>Two backends, one API</h2>
<p>The narration system supports two TTS backends selected by a single environment variable. Test code is identical for both; only the <code>TTS</code> env var changes:</p>
<table><thead><tr><th></th><th>Web Speech API</th><th>edge-tts</th></tr></thead><tbody><tr><td><strong>Runs where</strong></td><td>Browser (Chromium)</td><td>Node.js → browser playback</td></tr><tr><td><strong>Voices</strong></td><td>OS-provided</td><td>Microsoft neural voices (online)</td></tr><tr><td><strong>Quality</strong></td><td>Varies by OS</td><td>Consistently high (e.g. <code>en-US-EmmaMultilingualNeural</code>)</td></tr><tr><td><strong>Audio in video</strong></td><td>No. Browser-side audio isn&#x27;t captured by Playwright&#x27;s video recorder</td><td>Yes. MP3 chunks merged into WebM via ffmpeg</td></tr><tr><td><strong>Extra deps</strong></td><td>None</td><td><code>@andresaya/edge-tts</code>, <code>ffmpeg</code> on PATH</td></tr><tr><td><strong>Env var</strong></td><td><code>TTS=web-speech-api</code> (default)</td><td><code>TTS=edge-tts</code></td></tr><tr><td><strong>Best for</strong></td><td>Live demos, quick local previews</td><td>Producing narrated video artifacts</td></tr></tbody></table>
<p>The key difference: Web Speech API plays audio through the browser&#x27;s audio output, which Playwright&#x27;s video recorder doesn&#x27;t capture. Edge-tts synthesizes audio as MP3 buffers on the Node side, tracks their time offsets, and merges them into the recorded video via ffmpeg after the test finishes. If you want narrated videos you can share, use edge-tts.</p>
<p><strong>A note on edge-tts:</strong> The <a href="https://www.npmjs.com/package/@andresaya/edge-tts"><code>@andresaya/edge-tts</code></a> package reverse-engineers Microsoft&#x27;s Edge Read Aloud API. It is not an official Microsoft product and may violate their Terms of Service. This makes it fine for local development, demos, and experimentation, but not for production workloads. If you need TTS in production, look at <a href="https://azure.microsoft.com/en-us/products/ai-services/ai-speech">Azure AI Speech</a></p>
<h2>Architecture</h2>
<p>Here&#x27;s how speech flows through the system:</p>
<pre><code>Test file (tests/*.spec.ts)
  │
  │  tutorial.speak(&#x27;Welcome to the tutorial&#x27;)
  │  tutorial.highlight(&#x27;.input&#x27;, { speech: &#x27;Type here&#x27; })
  │
  ▼
Tutorial class (lib/tutorial.ts)
  │
  │  active=true?  ──no──▶  return (no-op)
  │       │
  │      yes
  │       │
  │  _speak() dispatches based on TTS env var
  │       │
  │       ├── TTS=web-speech-api ──▶ page.evaluate() ──▶ SpeechSynthesisUtterance
  │       │                          (browser-side, live audio only)
  │       │
  │       └── TTS=edge-tts ──▶ EdgeTTS.synthesize() on Node
  │                │               │
  │                │          base64 MP3 buffer
  │                │               │
  │                ├── page.evaluate() ──▶ new Audio(data:...) ──▶ live playback
  │                │
  │                └── audioChunks.push({ buffer, offsetMs })
  │                                           │
  ▼                                           │
Fixture teardown (lib/fixtures.ts)            │
  │                                           │
  │  page.close() ── stop video recording     │
  │  video.saveAs() ── flush video file       │
  │       │                                   │
  │       ▼                                   ▼
  │  mergeAudioWithVideo(videoPath, chunks, outputPath)
  │       │
  │       │  ffprobe ── get video duration
  │       │  write temp MP3 files
  │       │  ffmpeg ── adelay filters + amix + libopus encode
  │       │
  │       ▼
  │  video-narrated.webm attached to HTML report
</code></pre>
<p>When using Web Speech API, the path is simple: <code>page.evaluate()</code> fires a <code>SpeechSynthesisUtterance</code> and resolves when it finishes. No artifacts are produced.</p>
<p>When using edge-tts, each synthesis call produces an MP3 buffer that&#x27;s both played back live in the browser and stored with its time offset. After the test completes, the fixture teardown merges all chunks into the recorded video.</p>
<h2>Two ways to trigger speech</h2>
<h3>Standalone narration with <code>speak()</code></h3>
<p>Use <code>speak()</code> when you want narration without a visual overlay: introductions, transitions, or closing remarks:</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token comment">// Introduce the app before any highlights</span>
<span class="token keyword control-flow">await</span> tutorial<span class="token punctuation">.</span><span class="token method function property-access">speak</span><span class="token punctuation">(</span><span class="token string">&#x27;Welcome to the TodoMVC tutorial. Let\&#x27;s learn how to manage a todo list.&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><code>speak()</code> is a no-op when the tutorial is inactive. It blocks until the utterance finishes, so the test doesn&#x27;t race ahead of the narration.</p>
<h3>Concurrent speech with <code>highlight()</code></h3>
<p>Add a <code>speech</code> field to any <code>highlight()</code> call to narrate while the overlay is visible:</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword control-flow">await</span> tutorial<span class="token punctuation">.</span><span class="token method function property-access">highlight</span><span class="token punctuation">(</span><span class="token string">&#x27;.new-todo&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">&#x27;New Todo Input&#x27;</span><span class="token punctuation">,</span>
  text<span class="token operator">:</span> <span class="token string">&#x27;Type your todo item here and press Enter.&#x27;</span><span class="token punctuation">,</span>
  side<span class="token operator">:</span> <span class="token string">&#x27;bottom&#x27;</span><span class="token punctuation">,</span>
  speech<span class="token operator">:</span> <span class="token string">&#x27;This is the input field where you type new todo items.&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Notice that <code>text</code> (the popover body) and <code>speech</code> (the spoken words) are independent. The popover might say &quot;Type your todo item here and press Enter&quot; while the voice says something more conversational. Concise text works better for visual scanning; natural phrasing works better for audio.</p>
<p>Under the hood, <code>highlight()</code> runs the display timeout and speech in parallel with <code>Promise.all</code>:</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token comment">// From lib/tutorial.ts - _highlightElement()</span>
<span class="token keyword">const</span> waitPromises<span class="token operator">:</span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_page</span><span class="token punctuation">.</span><span class="token method function property-access">waitForTimeout</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span><span class="token property-access">timeout</span> <span class="token operator">??</span> <span class="token constant">DEFAULT_HIGHLIGHT_TIMEOUT</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span><span class="token property-access">speech</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  waitPromises<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">_speak</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span><span class="token property-access">speech</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword control-flow">await</span> <span class="token known-class-name class-name">Promise</span><span class="token punctuation">.</span><span class="token method function property-access">all</span><span class="token punctuation">(</span>waitPromises<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>The overlay stays visible until <em>both</em> the timeout elapses and speech finishes. If the voice takes longer than 3 seconds, the overlay waits. If the voice is shorter, it still shows for the full timeout.</p>
<h3>SpeakOptions</h3>
<p>Both <code>speak()</code> and <code>highlight()</code> accept speech tuning options:</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword module">export</span> <span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">SpeakOptions</span></span> <span class="token punctuation">{</span>
  <span class="token doc-comment comment">/** Speech rate (0.1–10). Default: 1.0 */</span>
  rate<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token doc-comment comment">/** Speech pitch (0–2). Default: 1.0 */</span>
  pitch<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token doc-comment comment">/** BCP 47 language tag, e.g. &#x27;en-US&#x27; */</span>
  lang<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token doc-comment comment">/** Edge TTS voice name, e.g. &#x27;en-US-AriaNeural&#x27;. Only used with edge-tts backend. */</span>
  voice<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>For <code>speak()</code>, pass options as the second argument. For <code>highlight()</code>, these fields aren&#x27;t directly exposed on <code>HighlightOptions</code>. The <code>speech</code> field is a plain string. If you need fine-grained control over voice parameters for a highlight, use <code>speak()</code> separately before or after the highlight call.</p>
<h2>Setup changes from post one</h2>
<h3>New dependency</h3>
<pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> @andresaya/edge-tts
</code></pre>
<p>And ensure <code>ffmpeg</code> is on your PATH (for narrated video output). On Ubuntu: <code>sudo apt install ffmpeg</code>. On macOS: <code>brew install ffmpeg</code>.</p>
<h3>Config: conditional Chromium args and timeout</h3>
<p>The Playwright config gains two changes. The <code>--enable-speech-dispatcher</code> launch arg is now conditional, since it&#x27;s only needed for Web Speech API, not edge-tts. And there&#x27;s a 5-minute test timeout to accommodate speech synthesis delays:</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token comment">// playwright.config.ts</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token generic-function"><span class="token function">defineConfig</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token maybe-class-name">TestOptions</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  timeout<span class="token operator">:</span> process<span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">TUTORIAL</span> <span class="token operator">?</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">60_000</span> <span class="token operator">:</span> <span class="token keyword nil">undefined</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
  use<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    launchOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
      slowMo<span class="token operator">:</span> process<span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">TUTORIAL</span> <span class="token operator">?</span> <span class="token number">500</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      args<span class="token operator">:</span> process<span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">TUTORIAL</span> <span class="token operator">&amp;&amp;</span> process<span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">TTS</span> <span class="token operator">!==</span> <span class="token string">&#x27;edge-tts&#x27;</span>
        <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token string">&#x27;--enable-speech-dispatcher&#x27;</span><span class="token punctuation">]</span>
        <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>The <code>--enable-speech-dispatcher</code> flag tells Chromium to use the system&#x27;s speech dispatcher on Linux. Edge-tts doesn&#x27;t need it because synthesis happens in Node, not the browser.</p>
<h3>Fixture: <code>tutorialObj</code> with teardown</h3>
<p>The <code>tutorialObj</code> fixture replaces manual <code>Tutorial</code> construction. It creates the instance, records the start time for audio offset tracking, and handles teardown, merging audio chunks into the video when using edge-tts:</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token comment">// lib/fixtures.ts</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> test <span class="token operator">=</span> base<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">extend</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token maybe-class-name">TestOptions</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  tutorial<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">!</span><span class="token operator">!</span>process<span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">TUTORIAL</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> option<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token function-variable function">tutorialObj</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> page<span class="token punctuation">,</span> tutorial<span class="token operator">:</span> tutorialActive <span class="token punctuation">}</span><span class="token punctuation">,</span> use<span class="token punctuation">,</span> testInfo<span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> tut <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">Tutorial</span></span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> tutorialActive<span class="token punctuation">)</span><span class="token punctuation">;</span>
    tut<span class="token punctuation">.</span><span class="token method function property-access">setStartTime</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Date</span><span class="token punctuation">.</span><span class="token method function property-access">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">await</span> <span class="token function">use</span><span class="token punctuation">(</span>tut<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Teardown: merge audio chunks into the recorded video if applicable</span>
    <span class="token keyword">const</span> chunks <span class="token operator">=</span> tut<span class="token punctuation">.</span><span class="token method function property-access">getAudioChunks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> isEdgeTts <span class="token operator">=</span> process<span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">TTS</span> <span class="token operator">===</span> <span class="token string">&#x27;edge-tts&#x27;</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>tutorialActive <span class="token operator">||</span> <span class="token operator">!</span>isEdgeTts <span class="token operator">||</span> chunks<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> video <span class="token operator">=</span> page<span class="token punctuation">.</span><span class="token method function property-access">video</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>video<span class="token punctuation">)</span> <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>

    <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">await</span> page<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> dir <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token method function property-access">dirname</span><span class="token punctuation">(</span>testInfo<span class="token punctuation">.</span><span class="token method function property-access">outputPath</span><span class="token punctuation">(</span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> videoPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token method function property-access">join</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> <span class="token string">&#x27;video-complete.webm&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow">await</span> video<span class="token punctuation">.</span><span class="token method function property-access">saveAs</span><span class="token punctuation">(</span>videoPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> outputPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token method function property-access">join</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> <span class="token string">&#x27;video-narrated.webm&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">mergeAudioWithVideo</span><span class="token punctuation">(</span>videoPath<span class="token punctuation">,</span> chunks<span class="token punctuation">,</span> outputPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow">await</span> testInfo<span class="token punctuation">.</span><span class="token method function property-access">attach</span><span class="token punctuation">(</span><span class="token string">&#x27;narrated-video&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        path<span class="token operator">:</span> outputPath<span class="token punctuation">,</span>
        contentType<span class="token operator">:</span> <span class="token string">&#x27;video/webm&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      fs<span class="token punctuation">.</span><span class="token method function property-access">unlinkSync</span><span class="token punctuation">(</span>videoPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
      fs<span class="token punctuation">.</span><span class="token method function property-access">unlinkSync</span><span class="token punctuation">(</span>outputPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">warn</span><span class="token punctuation">(</span><span class="token string">&#x27;[tutorial] Failed to merge audio into video:&#x27;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Tests destructure <code>tutorialObj</code> instead of the raw <code>tutorial</code> boolean:</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;add and complete a todo&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> page<span class="token punctuation">,</span> tutorialObj<span class="token operator">:</span> tutorial <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// tutorial is a fully configured Tutorial instance</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3>Tutorial class: TTS dispatch</h3>
<p>The <code>Tutorial</code> class gains a <code>_speak()</code> dispatcher that routes to the correct backend:</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token comment">// lib/tutorial.ts</span>
<span class="token keyword">private</span> <span class="token keyword">async</span> <span class="token function">_speak</span><span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">SpeakOptions</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_ttsBackend</span> <span class="token operator">===</span> <span class="token string">&#x27;edge-tts&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">_speakEdgeTts</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">_speakWebSpeechApi</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>Web Speech API backend</strong>: entirely in the browser via <code>page.evaluate()</code>. Waits for voices to load, creates a <code>SpeechSynthesisUtterance</code>, and resolves when the utterance ends:</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">private</span> <span class="token keyword">async</span> <span class="token function">_speakWebSpeechApi</span><span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">SpeakOptions</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_page</span><span class="token punctuation">.</span><span class="token method function property-access">evaluate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> t<span class="token punctuation">,</span> opts <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">speechSynthesis</span><span class="token punctuation">.</span><span class="token method function property-access">getVoices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">await</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>voicesReady<span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">speechSynthesis</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onvoiceschanged</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">voicesReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">setTimeout</span><span class="token punctuation">(</span>voicesReady<span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">speechSynthesis</span><span class="token punctuation">.</span><span class="token method function property-access">getVoices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> utterance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">SpeechSynthesisUtterance</span></span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
      utterance<span class="token punctuation">.</span><span class="token property-access">rate</span> <span class="token operator">=</span> opts<span class="token operator">?.</span>rate <span class="token operator">??</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
      utterance<span class="token punctuation">.</span><span class="token property-access">pitch</span> <span class="token operator">=</span> opts<span class="token operator">?.</span>pitch <span class="token operator">??</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>opts<span class="token operator">?.</span>lang<span class="token punctuation">)</span> utterance<span class="token punctuation">.</span><span class="token property-access">lang</span> <span class="token operator">=</span> opts<span class="token punctuation">.</span><span class="token property-access">lang</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">30_000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      utterance<span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onend</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
      utterance<span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">speechSynthesis</span><span class="token punctuation">.</span><span class="token method function property-access">speak</span><span class="token punctuation">(</span>utterance<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> t<span class="token operator">:</span> text<span class="token punctuation">,</span> opts<span class="token operator">:</span> options <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>Edge-tts backend</strong>: on Node, then sends the base64-encoded MP3 to the browser for playback. Also saves the buffer and time offset for later video merging:</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">private</span> <span class="token keyword">async</span> <span class="token function">_speakEdgeTts</span><span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">SpeakOptions</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> voice <span class="token operator">=</span> options<span class="token operator">?.</span>voice <span class="token operator">??</span> <span class="token constant">DEFAULT_EDGE_TTS_VOICE</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> offsetMs <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_startTime</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token known-class-name class-name">Date</span><span class="token punctuation">.</span><span class="token method function property-access">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_startTime</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> tts <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">EdgeTTS</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">await</span> tts<span class="token punctuation">.</span><span class="token method function property-access">synthesize</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> voice<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      rate<span class="token operator">:</span> options<span class="token operator">?.</span>rate <span class="token operator">!==</span> <span class="token keyword nil">undefined</span>
        <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span><span class="token property-access">rate</span> <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">&#x27;+&#x27;</span> <span class="token operator">:</span> <span class="token string">&#x27;&#x27;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span><span class="token property-access">rate</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%</span><span class="token template-punctuation string">`</span></span>
        <span class="token operator">:</span> <span class="token keyword nil">undefined</span><span class="token punctuation">,</span>
      pitch<span class="token operator">:</span> options<span class="token operator">?.</span>pitch <span class="token operator">!==</span> <span class="token keyword nil">undefined</span>
        <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span><span class="token property-access">pitch</span> <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">&#x27;+&#x27;</span> <span class="token operator">:</span> <span class="token string">&#x27;&#x27;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span><span class="token property-access">pitch</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">Hz</span><span class="token template-punctuation string">`</span></span>
        <span class="token operator">:</span> <span class="token keyword nil">undefined</span><span class="token punctuation">,</span>
      outputFormat<span class="token operator">:</span> <span class="token constant">EDGE_TTS_FORMAT</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> base64 <span class="token operator">=</span> <span class="token keyword control-flow">await</span> tts<span class="token punctuation">.</span><span class="token method function property-access">toBase64</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>offsetMs <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_audioChunks</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> buffer<span class="token operator">:</span> <span class="token maybe-class-name">Buffer</span><span class="token punctuation">.</span><span class="token keyword module">from</span><span class="token punctuation">(</span>base64<span class="token punctuation">,</span> <span class="token string">&#x27;base64&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> offsetMs <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword control-flow">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_page</span><span class="token punctuation">.</span><span class="token method function property-access">evaluate</span><span class="token punctuation">(</span><span class="token punctuation">(</span>audioData<span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token known-class-name class-name">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> audio <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">Audio</span></span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">data:audio/mpeg;base64,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>audioData<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">30_000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        audio<span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onended</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        audio<span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        audio<span class="token punctuation">.</span><span class="token method function property-access">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword control-flow">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> base64<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">{</span>
    <span class="token comment">// Graceful degradation: silently skip speech on failure</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The <code>try/catch</code> around the entire edge-tts path means any failure (network error, invalid voice name, API outage) is silently swallowed. The test continues without narration.</p>
<h2>The ffmpeg merge pipeline</h2>
<p>The <code>mergeAudioWithVideo()</code> function in <code>lib/audio-merger.ts</code> takes the recorded WebM video and an array of <code>AudioChunk</code>s (each with a buffer and millisecond offset) and produces a new WebM with narration baked in.</p>
<p>Here&#x27;s what happens step by step:</p>
<ol>
<li>Probe the video duration with <code>ffprobe</code> so the audio track spans the full video length.</li>
<li>Write each MP3 chunk to a temp file.</li>
<li>Build an ffmpeg filter graph that positions each chunk at its correct time offset using <code>adelay</code> filters, mixes everything with <code>amix</code>, and adds a silent track to pad the full duration.</li>
<li>Copy the video stream (no re-encode) and encode the mixed audio as libopus for WebM.</li>
</ol>
<p>The generated ffmpeg command looks roughly like this for a test with three speech chunks:</p>
<pre class="language-bash"><code class="language-bash">ffmpeg -y <span class="token punctuation">\</span>
  -i <span class="token string">&quot;video-complete.webm&quot;</span> <span class="token punctuation">\</span>                     <span class="token comment"># input 0: recorded video</span>
  -f lavfi -t <span class="token number">45.2</span> -i <span class="token assign-left variable">anullsrc</span><span class="token operator">=</span>r<span class="token operator">=</span><span class="token number">48000</span>:cl<span class="token operator">=</span>stereo <span class="token punctuation">\</span> <span class="token comment"># input 1: silence for full duration</span>
  -i <span class="token string">&quot;chunk-0.mp3&quot;</span> <span class="token punctuation">\</span>                              <span class="token comment"># input 2: first speech chunk</span>
  -i <span class="token string">&quot;chunk-1.mp3&quot;</span> <span class="token punctuation">\</span>                              <span class="token comment"># input 3: second speech chunk</span>
  -i <span class="token string">&quot;chunk-2.mp3&quot;</span> <span class="token punctuation">\</span>                              <span class="token comment"># input 4: third speech chunk</span>
  -filter_complex <span class="token punctuation">\</span>
    <span class="token string">&quot;[2:a]adelay=1200|1200[a0]; \                  # chunk 0 starts at 1.2s
     [3:a]adelay=8500|8500[a1]; \                  # chunk 1 starts at 8.5s
     [4:a]adelay=22000|22000[a2]; \                # chunk 2 starts at 22s
     [1:a][a0][a1][a2]amix=inputs=4:normalize=0[aout]&quot;</span> <span class="token punctuation">\</span>
  -map <span class="token number">0</span>:v -map <span class="token string">&quot;[aout]&quot;</span> <span class="token punctuation">\</span>                        <span class="token comment"># keep original video, use mixed audio</span>
  -c:v copy -c:a libopus <span class="token punctuation">\</span>                        <span class="token comment"># no video re-encode, opus audio</span>
  <span class="token string">&quot;video-narrated.webm&quot;</span>
</code></pre>
<p>The <code>anullsrc</code> silent track ensures <code>amix</code> (with <code>duration=longest</code>) keeps the audio stream alive for the entire video. Without it, the audio track would end after the last speech chunk, leaving the rest of the video silent, or worse, causing ffmpeg to truncate.</p>
<p>The <code>normalize=0</code> flag on <code>amix</code> prevents automatic volume normalization that would amplify silence between chunks.</p>
<h2>Running it</h2>
<p>Three modes, same test code:</p>
<p><strong>Silent tests</strong> (CI, no highlights, no speech):</p>
<pre class="language-bash"><code class="language-bash">npx playwright <span class="token builtin class-name">test</span> --project<span class="token operator">=</span>chromium
</code></pre>
<p><strong>Web Speech API</strong> (live speech through speakers, no audio in recording):</p>
<pre class="language-bash"><code class="language-bash"><span class="token assign-left variable">TUTORIAL</span><span class="token operator">=</span><span class="token number">1</span> npx playwright <span class="token builtin class-name">test</span> --headed --project<span class="token operator">=</span>chromium
</code></pre>
<p><strong>Edge-tts</strong> (neural voices, narrated video output):</p>
<pre class="language-bash"><code class="language-bash"><span class="token assign-left variable">TUTORIAL</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">TTS</span><span class="token operator">=</span>edge-tts npx playwright <span class="token builtin class-name">test</span> --headed --project<span class="token operator">=</span>chromium
</code></pre>
<p>After an edge-tts run, open the HTML report:</p>
<pre class="language-bash"><code class="language-bash">npx playwright show-report
</code></pre>
<p>Click into the test result, and you&#x27;ll find a <code>narrated-video</code> attachment, a WebM file with the original screen recording plus the synthesized narration mixed in at the correct timestamps.</p>
<h2>Failure modes</h2>
<p>Speech never breaks a test:</p>
<ul>
<li><strong>No voices available</strong> (Web Speech API): <code>_speakWebSpeechApi</code> waits up to 3 seconds for voices to load. If none appear, it resolves immediately. The highlight shows, the voice is silent.</li>
<li><strong>Edge-tts fails</strong> (network error, bad voice name): The entire <code>_speakEdgeTts</code> method is wrapped in <code>try/catch</code>. Any error is swallowed. The test continues.</li>
<li><strong>No ffmpeg on PATH</strong>: The fixture teardown catches the <code>execSync</code> error, logs a warning, and moves on. The test passes; you just don&#x27;t get a narrated video.</li>
<li><strong>No <code>TUTORIAL</code> env var</strong>: All <code>highlight()</code> and <code>speak()</code> calls are no-ops. Zero overhead, zero side effects.</li>
<li><strong>Safety timeout</strong>: Both backends set a 30-second timeout on speech playback. If the <code>onended</code> event never fires (browser bug, audio driver issue), the promise resolves after 30 seconds instead of hanging forever.</li>
</ul>
<h2>What you get</h2>
<p>Add <code>speech</code> fields to highlights you&#x27;d write anyway, throw in a <code>speak()</code> call for transitions, and each edge-tts tutorial run produces a WebM with synchronized voice narration. Web Speech API is there for quick local previews; edge-tts with Microsoft neural voices is for the recordings you actually share.</p>
<p>Popover text and speech are independent, so you can write concise labels in popovers and natural sentences for narration. Without <code>TUTORIAL=1</code>, everything is still a no-op. No extra dependencies loaded, no slowdown, no network calls. And as covered above, if voices or ffmpeg aren&#x27;t available, the test still passes.</p>
<p>The test is still a test. It asserts correctness, runs in CI without modification, and breaks when the UI changes. The narration is just a layer on top.</p></div></article></div></div></div></div></div></div><!--$--><!--/$--></main><footer class="mt-32 flex-none"><div class="sm:px-8"><div class="mx-auto w-full max-w-7xl lg:px-8"><div class="border-t border-zinc-100 pt-10 pb-16 dark:border-zinc-700/40"><div class="relative px-4 sm:px-8 lg:px-12"><div class="mx-auto max-w-2xl lg:max-w-5xl"><div class="flex flex-col items-center justify-between gap-6 md:flex-row"><div class="flex flex-wrap justify-center gap-x-6 gap-y-1 text-sm font-medium text-zinc-800 dark:text-zinc-200"><a class="transition hover:text-teal-500 dark:hover:text-teal-400" href="/">Home</a><a class="transition hover:text-teal-500 dark:hover:text-teal-400" href="/about">About</a><a class="transition hover:text-teal-500 dark:hover:text-teal-400" href="/articles">Articles</a></div><p class="text-sm text-zinc-400 dark:text-zinc-500">© <!-- -->2026<!-- --> <!-- -->MLgentDev<!-- -->. All rights reserved.</p></div></div></div></div></div></div></footer></div></div><script src="/_next/static/chunks/webpack-a36efa9c3a6b52b3.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[2123,[\"545\",\"static/chunks/c16f53c3-d1dc27298ca4c9c2.js\",\"500\",\"static/chunks/500-5d45efbf86b8d36e.js\",\"437\",\"static/chunks/437-ada648f38726907a.js\",\"599\",\"static/chunks/599-fb57cafa2e73e4e9.js\",\"177\",\"static/chunks/app/layout-5b8e43ba4735418d.js\"],\"Providers\"]\n3:I[4546,[\"545\",\"static/chunks/c16f53c3-d1dc27298ca4c9c2.js\",\"500\",\"static/chunks/500-5d45efbf86b8d36e.js\",\"437\",\"static/chunks/437-ada648f38726907a.js\",\"599\",\"static/chunks/599-fb57cafa2e73e4e9.js\",\"177\",\"static/chunks/app/layout-5b8e43ba4735418d.js\"],\"Header\"]\n4:I[7121,[],\"\"]\n5:I[4581,[],\"\"]\n6:I[8500,[\"500\",\"static/chunks/500-5d45efbf86b8d36e.js\",\"437\",\"static/chunks/437-ada648f38726907a.js\",\"922\",\"static/chunks/app/articles/adding-voice-narration-to-playwright-tests/page-9f73da5d3cf68b7d.js\"],\"\"]\n7:I[2593,[\"545\",\"static/chunks/c16f53c3-d1dc27298ca4c9c2.js\",\"500\",\"static/chunks/500-5d45efbf86b8d36e.js\",\"437\",\"static/chunks/437-ada648f38726907a.js\",\"599\",\"static/chunks/599-fb57cafa2e73e4e9.js\",\"177\",\"static/chunks/app/layout-5b8e43ba4735418d.js\"],\"\"]\na:I[7123,[],\"\"]\n:HL[\"/_next/static/css/f7f55f29058f52ce.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"6ddNZCJZAlFcSAgLwthWS\",\"c\":[\"\",\"articles\",\"adding-voice-narration-to-playwright-tests\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"articles\",{\"children\":[\"adding-voice-narration-to-playwright-tests\",{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/f7f55f29058f52ce.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"h-full antialiased\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"flex h-full bg-zinc-50 dark:bg-black\",\"children\":[[\"$\",\"$L2\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"flex w-full\",\"children\":[[\"$\",\"div\",null,{\"className\":\"fixed inset-0 flex justify-center sm:px-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex w-full max-w-7xl lg:px-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"w-full bg-white ring-1 ring-zinc-100 dark:bg-zinc-900 dark:ring-zinc-300/20\"}]}]}],[\"$\",\"div\",null,{\"className\":\"relative flex w-full flex-col\",\"children\":[[\"$\",\"$L3\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-auto\",\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"div\",null,{\"ref\":\"$undefined\",\"className\":\"sm:px-8 flex h-full items-center pt-16 sm:pt-32\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto w-full max-w-7xl lg:px-8\",\"children\":[\"$\",\"div\",null,{\"ref\":\"$undefined\",\"className\":\"relative px-4 sm:px-8 lg:px-12\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-2xl lg:max-w-5xl\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex flex-col items-center\",\"children\":[[\"$\",\"p\",null,{\"className\":\"text-base font-semibold text-zinc-400 dark:text-zinc-500\",\"children\":\"404\"}],[\"$\",\"h1\",null,{\"className\":\"mt-4 text-4xl font-bold tracking-tight text-zinc-800 sm:text-5xl dark:text-zinc-100\",\"children\":\"Page not found\"}],[\"$\",\"p\",null,{\"className\":\"mt-4 text-base text-zinc-600 dark:text-zinc-400\",\"children\":\"Sorry, we couldn’t find the page you’re looking for.\"}],[\"$\",\"$L6\",null,{\"className\":\"inline-flex items-center gap-2 justify-center rounded-md py-2 px-3 text-sm outline-offset-2 transition active:transition-none bg-zinc-50 font-medium text-zinc-900 hover:bg-zinc-100 active:bg-zinc-100 active:text-zinc-900/60 dark:bg-zinc-800/50 dark:text-zinc-300 dark:hover:bg-zinc-800 dark:hover:text-zinc-50 dark:active:bg-zinc-800/50 dark:active:text-zinc-50/70 mt-4\",\"href\":\"/\",\"children\":\"Go back home\"}]]}]}]}]}]}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"footer\",null,{\"className\":\"mt-32 flex-none\",\"children\":[\"$\",\"div\",null,{\"ref\":\"$undefined\",\"className\":\"sm:px-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto w-full max-w-7xl lg:px-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"border-t border-zinc-100 pt-10 pb-16 dark:border-zinc-700/40\",\"children\":[\"$\",\"div\",null,{\"ref\":\"$undefined\",\"className\":\"relative px-4 sm:px-8 lg:px-12\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-2xl lg:max-w-5xl\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex flex-col items-center justify-between gap-6 md:flex-row\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex flex-wrap justify-center gap-x-6 gap-y-1 text-sm font-medium text-zinc-800 dark:text-zinc-200\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"/\",\"className\":\"transition hover:text-teal-500 dark:hover:text-teal-400\",\"children\":\"Home\"}],[\"$\",\"$L6\",null,{\"href\":\"/about\",\"className\":\"transition hover:text-teal-500 dark:hover:text-teal-400\",\"children\":\"About\"}],[\"$\",\"$L6\",null,{\"href\":\"/articles\",\"className\":\"transition hover:text-teal-500 dark:hover:text-teal-400\",\"children\":\"Articles\"}],false,false,false]}],[\"$\",\"p\",null,{\"className\":\"text-sm text-zinc-400 dark:text-zinc-500\",\"children\":[\"© \",2026,\" \",\"MLgentDev\",\". All rights reserved.\"]}]]}]}]}]}]}]}]}]]}]]}]}],[\"$\",\"$L7\",null,{\"defer\":true,\"src\":\"https://web-analytics.mlgent.dev/script.js\",\"data-website-id\":\"8e4d28af-2dda-4e0b-ba2f-b8fe7250cfa1\"}]]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"$L8\",{},null,false,false]},null,false,false]},null,false,false]},null,false,false],\"$L9\",false]],\"m\":\"$undefined\",\"G\":[\"$a\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"b:I[9580,[\"500\",\"static/chunks/500-5d45efbf86b8d36e.js\",\"437\",\"static/chunks/437-ada648f38726907a.js\",\"922\",\"static/chunks/app/articles/adding-voice-narration-to-playwright-tests/page-9f73da5d3cf68b7d.js\"],\"ArticleLayout\"]\nc:I[8437,[\"500\",\"static/chunks/500-5d45efbf86b8d36e.js\",\"437\",\"static/chunks/437-ada648f38726907a.js\",\"922\",\"static/chunks/app/articles/adding-voice-narration-to-playwright-tests/page-9f73da5d3cf68b7d.js\"],\"Image\"]\n56:I[484,[],\"ViewportBoundary\"]\n58:I[484,[],\"MetadataBoundary\"]\n59:\"$Sreact.suspense\"\n"])</script><script>self.__next_f.push([1,"8:[\"$\",\"$1\",\"c\",{\"children\":[[\"$\",\"$Lb\",null,{\"article\":{\"author\":\"MLgentDev\",\"date\":\"2026-02-23\",\"title\":\"Add Voice Narration to Your Playwright Tutorial Tests\",\"description\":\"How to add TTS narration to Playwright tutorial tests with two backends: Web Speech API for live previews and edge-tts for producing narrated video artifacts.\"},\"children\":[[\"$\",\"$Lc\",null,{\"src\":{\"src\":\"/_next/static/media/playwright-audio.02910582.png\",\"height\":559,\"width\":1024,\"blurDataURL\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAAJFBMVEX////v8PD19fXa5d/V2d3j5ebf4uSorbPj1NDk7PG1z7ibv6ZX2jdvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAJElEQVR4nGPgZuZiZGFjYGBgZuJg4mRigABGRjYWMIOVkZUdAAeuAFxmX/C1AAAAAElFTkSuQmCC\",\"blurWidth\":8,\"blurHeight\":4},\"alt\":\"Playwright -\u003e Tests -\u003e Driver.js -\u003e Audio -\u003e Tutorials\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"TL;DR\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Add \",[\"$\",\"code\",null,{\"children\":\"speech\"}],\" fields to your Playwright tutorial highlights and a \",[\"$\",\"code\",null,{\"children\":\"speak()\"}],\" call or two. Set \",[\"$\",\"code\",null,{\"children\":\"TTS=edge-tts\"}],\" and your silent walkthroughs become narrated videos with Microsoft neural voices, merged via ffmpeg.\"]}],\"\\n\",[\"$\",\"div\",null,{\"style\":{\"position\":\"relative\",\"paddingBottom\":\"56.25%\",\"height\":0,\"overflow\":\"hidden\"},\"children\":[\"$\",\"iframe\",null,{\"src\":\"https://www.youtube.com/embed/xklIhG1DgyM\",\"title\":\"Playwright Tutorial Tests with Voice Narration\",\"allow\":\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",\"allowFullScreen\":true,\"style\":{\"position\":\"absolute\",\"top\":0,\"left\":0,\"width\":\"100%\",\"height\":\"100%\",\"borderRadius\":\"1rem\"}}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Source code: \",[\"$\",\"a\",null,{\"href\":\"https://github.com/MLgentDev/playwright-tests-as-tutorials\",\"children\":\"MLgentDev/playwright-tests-as-tutorials\"}]]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Intro\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"In the \",[\"$\",\"a\",null,{\"href\":\"/articles/playwright-tests-as-tutorials\",\"children\":\"previous post\"}],\" we turned Playwright tests into visual tutorials by injecting Driver.js overlays at runtime. One environment variable flips between fast CI tests and headed walkthroughs with spotlighted elements and popovers.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The result is useful but silent. The recorded videos show overlays appearing and disappearing without any spoken context. Popovers vanish after three seconds, and anyone watching the recording later has to pause and squint to read them. For onboarding videos, accessibility, or async demos, you really want a voice explaining what's happening.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"This post adds voice narration to the same system. The test code barely changes: a \",[\"$\",\"code\",null,{\"children\":\"speech\"}],\" field on highlights and a standalone \",[\"$\",\"code\",null,{\"children\":\"speak()\"}],\" call. But the output goes from silent screen recording to narrated video with Microsoft neural voices.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"The problem with silent tutorials\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The overlay-based tutorials from post one work well when you're watching live. But they fall short once you're not in the room.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Recorded videos lose context. Popovers are on screen for three seconds. In a recording, the viewer can't pause the overlay or re-read the text at their own pace. Screen readers can't access Driver.js popovers either, since they're injected DOM elements with no ARIA semantics. And when you share a tutorial video in a Slack thread or embed it in docs, there's nobody present to explain what's happening.\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Two backends, one API\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"The narration system supports two TTS backends selected by a single environment variable. Test code is identical for both; only the \",\"$Ld\",\" env var changes:\"]}],\"\\n\",\"$Le\",\"\\n\",\"$Lf\",\"\\n\",\"$L10\",\"\\n\",\"$L11\",\"\\n\",\"$L12\",\"\\n\",\"$L13\",\"\\n\",\"$L14\",\"\\n\",\"$L15\",\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\",\"\\n\",\"$L2e\",\"\\n\",\"$L2f\",\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\",\"\\n\",\"$L36\",\"\\n\",\"$L37\",\"\\n\",\"$L38\",\"\\n\",\"$L39\",\"\\n\",\"$L3a\",\"\\n\",\"$L3b\",\"\\n\",\"$L3c\",\"\\n\",\"$L3d\",\"\\n\",\"$L3e\",\"\\n\",\"$L3f\",\"\\n\",\"$L40\",\"\\n\",\"$L41\",\"\\n\",\"$L42\",\"\\n\",\"$L43\",\"\\n\",\"$L44\",\"\\n\",\"$L45\",\"\\n\",\"$L46\",\"\\n\",\"$L47\",\"\\n\",\"$L48\",\"\\n\",\"$L49\",\"\\n\",\"$L4a\",\"\\n\",\"$L4b\",\"\\n\",\"$L4c\",\"\\n\",\"$L4d\",\"\\n\",\"$L4e\",\"\\n\",\"$L4f\",\"\\n\",\"$L50\",\"\\n\",\"$L51\",\"\\n\",\"$L52\",\"\\n\",\"$L53\",\"\\n\",\"$L54\"]}],null,\"$L55\"]}]\n"])</script><script>self.__next_f.push([1,"9:[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L56\",null,{\"children\":\"$L57\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$L58\",null,{\"children\":[\"$\",\"$59\",null,{\"name\":\"Next.Metadata\",\"children\":\"$L5a\"}]}]}],null]}]\n"])</script><script>self.__next_f.push([1,"22a:I[484,[],\"OutletBoundary\"]\nd:[\"$\",\"code\",null,{\"children\":\"TTS\"}]\n"])</script><script>self.__next_f.push([1,"e:[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{}],[\"$\",\"th\",null,{\"children\":\"Web Speech API\"}],[\"$\",\"th\",null,{\"children\":\"edge-tts\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"Runs where\"}]}],[\"$\",\"td\",null,{\"children\":\"Browser (Chromium)\"}],[\"$\",\"td\",null,{\"children\":\"Node.js → browser playback\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"Voices\"}]}],[\"$\",\"td\",null,{\"children\":\"OS-provided\"}],[\"$\",\"td\",null,{\"children\":\"Microsoft neural voices (online)\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"Quality\"}]}],[\"$\",\"td\",null,{\"children\":\"Varies by OS\"}],[\"$\",\"td\",null,{\"children\":[\"Consistently high (e.g. \",[\"$\",\"code\",null,{\"children\":\"en-US-EmmaMultilingualNeural\"}],\")\"]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"Audio in video\"}]}],[\"$\",\"td\",null,{\"children\":\"No. Browser-side audio isn't captured by Playwright's video recorder\"}],[\"$\",\"td\",null,{\"children\":\"Yes. MP3 chunks merged into WebM via ffmpeg\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"Extra deps\"}]}],[\"$\",\"td\",null,{\"children\":\"None\"}],[\"$\",\"td\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"@andresaya/edge-tts\"}],\", \",[\"$\",\"code\",null,{\"children\":\"ffmpeg\"}],\" on PATH\"]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"Env var\"}]}],[\"$\",\"td\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"TTS=web-speech-api\"}],\" (default)\"]}],[\"$\",\"td\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"TTS=edge-tts\"}]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"Best for\"}]}],[\"$\",\"td\",null,{\"children\":\"Live demos, quick local previews\"}],[\"$\",\"td\",null,{\"children\":\"Producing narrated video artifacts\"}]]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"f:[\"$\",\"p\",null,{\"children\":\"The key difference: Web Speech API plays audio through the browser's audio output, which Playwright's video recorder doesn't capture. Edge-tts synthesizes audio as MP3 buffers on the Node side, tracks their time offsets, and merges them into the recorded video via ffmpeg after the test finishes. If you want narrated videos you can share, use edge-tts.\"}]\n10:[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"A note on edge-tts:\"}],\" The \",[\"$\",\"a\",null,{\"href\":\"https://www.npmjs.com/package/@andresaya/edge-tts\",\"children\":[\"$\",\"code\",null,{\"children\":\"@andresaya/edge-tts\"}]}],\" package reverse-engineers Microsoft's Edge Read Aloud API. It is not an official Microsoft product and may violate their Terms of Service. This makes it fine for local development, demos, and experimentation, but not for production workloads. If you need TTS in production, look at \",[\"$\",\"a\",null,{\"href\":\"https://azure.microsoft.com/en-us/products/ai-services/ai-speech\",\"children\":\"Azure AI Speech\"}]]}]\n11:[\"$\",\"h2\",null,{\"children\":\"Architecture\"}]\n12:[\"$\",\"p\",null,{\"children\":\"Here's how speech flows through the system:\"}]\n5b:T6a6,"])</script><script>self.__next_f.push([1,"Test file (tests/*.spec.ts)\n  │\n  │  tutorial.speak('Welcome to the tutorial')\n  │  tutorial.highlight('.input', { speech: 'Type here' })\n  │\n  ▼\nTutorial class (lib/tutorial.ts)\n  │\n  │  active=true?  ──no──▶  return (no-op)\n  │       │\n  │      yes\n  │       │\n  │  _speak() dispatches based on TTS env var\n  │       │\n  │       ├── TTS=web-speech-api ──▶ page.evaluate() ──▶ SpeechSynthesisUtterance\n  │       │                          (browser-side, live audio only)\n  │       │\n  │       └── TTS=edge-tts ──▶ EdgeTTS.synthesize() on Node\n  │                │               │\n  │                │          base64 MP3 buffer\n  │                │               │\n  │                ├── page.evaluate() ──▶ new Audio(data:...) ──▶ live playback\n  │                │\n  │                └── audioChunks.push({ buffer, offsetMs })\n  │                                           │\n  ▼                                           │\nFixture teardown (lib/fixtures.ts)            │\n  │                                           │\n  │  page.close() ── stop video recording     │\n  │  video.saveAs() ── flush video file       │\n  │       │                                   │\n  │       ▼                                   ▼\n  │  mergeAudioWithVideo(videoPath, chunks, outputPath)\n  │       │\n  │       │  ffprobe ── get video duration\n  │       │  write temp MP3 files\n  │       │  ffmpeg ── adelay filters + amix + libopus encode\n  │       │\n  │       ▼\n  │  video-narrated.webm attached to HTML report\n"])</script><script>self.__next_f.push([1,"13:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"$5b\"}]}]\n14:[\"$\",\"p\",null,{\"children\":[\"When using Web Speech API, the path is simple: \",[\"$\",\"code\",null,{\"children\":\"page.evaluate()\"}],\" fires a \",[\"$\",\"code\",null,{\"children\":\"SpeechSynthesisUtterance\"}],\" and resolves when it finishes. No artifacts are produced.\"]}]\n15:[\"$\",\"p\",null,{\"children\":\"When using edge-tts, each synthesis call produces an MP3 buffer that's both played back live in the browser and stored with its time offset. After the test completes, the fixture teardown merges all chunks into the recorded video.\"}]\n16:[\"$\",\"h2\",null,{\"children\":\"Two ways to trigger speech\"}]\n17:[\"$\",\"h3\",null,{\"children\":[\"Standalone narration with \",[\"$\",\"code\",null,{\"children\":\"speak()\"}]]}]\n18:[\"$\",\"p\",null,{\"children\":[\"Use \",[\"$\",\"code\",null,{\"children\":\"speak()\"}],\" when you want narration without a visual overlay: introductions, transitions, or closing remarks:\"]}]\n19:[\"$\",\"pre\",null,{\"className\":\"language-typescript\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-typescript\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// Introduce the app before any highlights\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"await\"}],\" tutorial\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"speak\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'Welcome to the TodoMVC tutorial. Let\\\\'s learn how to manage a todo list.'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}]}]\n1a:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"speak()\"}],\" is a no-op when the tutorial is inactive. It blocks until the utterance finishes, so the test doesn't race ahead of the narration.\"]}]\n1b:[\"$\",\"h3\",null,{\"children\":[\"Concurrent speech with \",[\"$\",\"code\",null,{\"children\":\"highlight()\"}]]}]\n1c:[\"$\",\"p\",null,{\"children\":[\"Add a \",[\"$\",\"code\",null,{\"children\":\"speech\"}],\" field to any \",[\"$\",\"code\",null,{\"children\":\"highlight()\"}],\" call to narrate while the overlay is visible:\"]}]\n"])</script><script>self.__next_f.push([1,"1d:[\"$\",\"pre\",null,{\"className\":\"language-typescript\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-typescript\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"await\"}],\" tutorial\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"highlight\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'.new-todo'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n  title\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'New Todo Input'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n  text\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'Type your todo item here and press Enter.'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n  side\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'bottom'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n  speech\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'This is the input field where you type new todo items.'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}]}]\n"])</script><script>self.__next_f.push([1,"1e:[\"$\",\"p\",null,{\"children\":[\"Notice that \",[\"$\",\"code\",null,{\"children\":\"text\"}],\" (the popover body) and \",[\"$\",\"code\",null,{\"children\":\"speech\"}],\" (the spoken words) are independent. The popover might say \\\"Type your todo item here and press Enter\\\" while the voice says something more conversational. Concise text works better for visual scanning; natural phrasing works better for audio.\"]}]\n1f:[\"$\",\"p\",null,{\"children\":[\"Under the hood, \",[\"$\",\"code\",null,{\"children\":\"highlight()\"}],\" runs the display timeout and speech in parallel with \",[\"$\",\"code\",null,{\"children\":\"Promise.all\"}],\":\"]}]\n"])</script><script>self.__next_f.push([1,"20:[\"$\",\"pre\",null,{\"className\":\"language-typescript\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-typescript\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// From lib/tutorial.ts - _highlightElement()\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" waitPromises\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token known-class-name class-name\",\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"void\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"[\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"]\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"[\"}],\"\\n  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"this\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"_page\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"waitForTimeout\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"options\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"timeout\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"??\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"DEFAULT_HIGHLIGHT_TIMEOUT\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"]\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"options\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"speech\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n  waitPromises\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"push\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"this\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"_speak\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"options\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"speech\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token known-class-name class-name\",\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"all\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"waitPromises\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}]}]\n"])</script><script>self.__next_f.push([1,"21:[\"$\",\"p\",null,{\"children\":[\"The overlay stays visible until \",[\"$\",\"em\",null,{\"children\":\"both\"}],\" the timeout elapses and speech finishes. If the voice takes longer than 3 seconds, the overlay waits. If the voice is shorter, it still shows for the full timeout.\"]}]\n22:[\"$\",\"h3\",null,{\"children\":\"SpeakOptions\"}]\n23:[\"$\",\"p\",null,{\"children\":[\"Both \",[\"$\",\"code\",null,{\"children\":\"speak()\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"highlight()\"}],\" accept speech tuning options:\"]}]\n"])</script><script>self.__next_f.push([1,"24:[\"$\",\"pre\",null,{\"className\":\"language-typescript\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-typescript\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword module\",\"children\":\"export\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"interface\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"SpeakOptions\"}]}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/** Speech rate (0.1–10). Default: 1.0 */\"}],\"\\n  rate\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token builtin\",\"children\":\"number\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/** Speech pitch (0–2). Default: 1.0 */\"}],\"\\n  pitch\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token builtin\",\"children\":\"number\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/** BCP 47 language tag, e.g. 'en-US' */\"}],\"\\n  lang\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token builtin\",\"children\":\"string\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/** Edge TTS voice name, e.g. 'en-US-AriaNeural'. Only used with edge-tts backend. */\"}],\"\\n  voice\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token builtin\",\"children\":\"string\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]}]\n"])</script><script>self.__next_f.push([1,"25:[\"$\",\"p\",null,{\"children\":[\"For \",[\"$\",\"code\",null,{\"children\":\"speak()\"}],\", pass options as the second argument. For \",[\"$\",\"code\",null,{\"children\":\"highlight()\"}],\", these fields aren't directly exposed on \",[\"$\",\"code\",null,{\"children\":\"HighlightOptions\"}],\". The \",[\"$\",\"code\",null,{\"children\":\"speech\"}],\" field is a plain string. If you need fine-grained control over voice parameters for a highlight, use \",[\"$\",\"code\",null,{\"children\":\"speak()\"}],\" separately before or after the highlight call.\"]}]\n26:[\"$\",\"h2\",null,{\"children\":\"Setup changes from post one\"}]\n27:[\"$\",\"h3\",null,{\"children\":\"New dependency\"}]\n28:[\"$\",\"pre\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"npm\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"install\"}],\" @andresaya/edge-tts\\n\"]}]}]\n29:[\"$\",\"p\",null,{\"children\":[\"And ensure \",[\"$\",\"code\",null,{\"children\":\"ffmpeg\"}],\" is on your PATH (for narrated video output). On Ubuntu: \",[\"$\",\"code\",null,{\"children\":\"sudo apt install ffmpeg\"}],\". On macOS: \",[\"$\",\"code\",null,{\"children\":\"brew install ffmpeg\"}],\".\"]}]\n2a:[\"$\",\"h3\",null,{\"children\":\"Config: conditional Chromium args and timeout\"}]\n2b:[\"$\",\"p\",null,{\"children\":[\"The Playwright config gains two changes. The \",[\"$\",\"code\",null,{\"children\":\"--enable-speech-dispatcher\"}],\" launch arg is now conditional, since it's only needed for Web Speech API, not edge-tts. And there's a 5-minute test timeout to accommodate speech synthesis delays:\"]}]\n"])</script><script>self.__next_f.push([1,"2c:[\"$\",\"pre\",null,{\"className\":\"language-typescript\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-typescript\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// playwright.config.ts\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"token keyword module\",\"children\":\"export\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword module\",\"children\":\"default\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token generic-function\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"defineConfig\"}],[\"$\",\"span\",null,{\"className\":\"token generic class-name\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"TestOptions\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e\"}]]}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n  timeout\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" process\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"env\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"TUTORIAL\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"5\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"*\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"60_000\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword nil\",\"children\":\"undefined\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n  \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// ...\"}],\"\\n  use\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// ...\"}],\"\\n    launchOptions\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n      slowMo\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" process\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"env\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"TUTORIAL\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"500\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n      args\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" process\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"env\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"TUTORIAL\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u0026\u0026\"}],\" process\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"env\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"TTS\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"!==\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'edge-tts'\"}],\"\\n        \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"[\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'--enable-speech-dispatcher'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"]\"}],\"\\n        \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"[\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"]\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\",\"$L5c\",\"$L5d\",\"$L5e\",\"\\n\"]}]}]\n"])</script><script>self.__next_f.push([1,"2d:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"--enable-speech-dispatcher\"}],\" flag tells Chromium to use the system's speech dispatcher on Linux. Edge-tts doesn't need it because synthesis happens in Node, not the browser.\"]}]\n2e:[\"$\",\"h3\",null,{\"children\":[\"Fixture: \",[\"$\",\"code\",null,{\"children\":\"tutorialObj\"}],\" with teardown\"]}]\n2f:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"tutorialObj\"}],\" fixture replaces manual \",[\"$\",\"code\",null,{\"children\":\"Tutorial\"}],\" construction. It creates the instance, records the start time for audio offset tracking, and handles teardown, merging audio chunks into the video when using edge-tts:\"]}]\n"])</script><script>self.__next_f.push([1,"30:[\"$\",\"pre\",null,{\"className\":\"language-typescript\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-typescript\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// lib/fixtures.ts\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"token keyword module\",\"children\":\"export\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" test \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" base\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token generic-function\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"extend\"}],[\"$\",\"span\",null,{\"className\":\"token generic class-name\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"TestOptions\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e\"}]]}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n  tutorial\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"[\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"!\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"!\"}],\"process\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"env\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"TUTORIAL\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" option\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"true\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"]\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\\n  \",[\"$\",\"span\",null,{\"className\":\"token function-variable function\",\"children\":\"tutorialObj\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" tutorial\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" tutorialActive \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" use\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" testInfo\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token arrow operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" tut \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Tutorial\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" tutorialActive\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n    tut\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"setStartTime\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token known-class-name class-name\",\"children\":\"Date\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"now\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"use\"}],\"$L5f\",\"tut\",\"$L60\",\"$L61\",\"\\n\\n    \",\"$L62\",\"\\n    \",\"$L63\",\" chunks \",\"$L64\",\" tut\",\"$L65\",\"$L66\",\"$L67\",\"$L68\",\"$L69\",\"\\n    \",\"$L6a\",\" isEdgeTts \",\"$L6b\",\" process\",\"$L6c\",\"$L6d\",\"$L6e\",\"$L6f\",\" \",\"$L70\",\" \",\"$L71\",\"$L72\",\"\\n    \",\"$L73\",\" \",\"$L74\",\"$L75\",\"tutorialActive \",\"$L76\",\" \",\"$L77\",\"isEdgeTts \",\"$L78\",\" chunks\",\"$L79\",\"$L7a\",\" \",\"$L7b\",\" \",\"$L7c\",\"$L7d\",\" \",\"$L7e\",\"$L7f\",\"\\n\\n    \",\"$L80\",\" video \",\"$L81\",\" page\",\"$L82\",\"$L83\",\"$L84\",\"$L85\",\"$L86\",\"\\n    \",\"$L87\",\" \",\"$L88\",\"$L89\",\"video\",\"$L8a\",\" \",\"$L8b\",\"$L8c\",\"\\n\\n    \",\"$L8d\",\" \",\"$L8e\",\"\\n      \",\"$L8f\",\" page\",\"$L90\",\"$L91\",\"$L92\",\"$L93\",\"$L94\",\"\\n      \",\"$L95\",\" dir \",\"$L96\",\" path\",\"$L97\",\"$L98\",\"$L99\",\"testInfo\",\"$L9a\",\"$L9b\",\"$L9c\",\"$L9d\",\"$L9e\",\"$L9f\",\"$La0\",\"\\n      \",\"$La1\",\" videoPath \",\"$La2\",\" path\",\"$La3\",\"$La4\",\"$La5\",\"dir\",\"$La6\",\" \",\"$La7\",\"$La8\",\"$La9\",\"\\n      \",\"$Laa\",\" video\",\"$Lab\",\"$Lac\",\"$Lad\",\"videoPath\",\"$Lae\",\"$Laf\",\"\\n      \",\"$Lb0\",\" outputPath \",\"$Lb1\",\" path\",\"$Lb2\",\"$Lb3\",\"$Lb4\",\"dir\",\"$Lb5\",\" \",\"$Lb6\",\"$Lb7\",\"$Lb8\",\"\\n      \",\"$Lb9\",\"$Lba\",\"videoPath\",\"$Lbb\",\" chunks\",\"$Lbc\",\" outputPath\",\"$Lbd\",\"$Lbe\",\"\\n      \",\"$Lbf\",\" testInfo\",\"$Lc0\",\"$Lc1\",\"$Lc2\",\"$Lc3\",\"$Lc4\",\" \",\"$Lc5\",\"\\n        path\",\"$Lc6\",\" outputPath\",\"$Lc7\",\"\\n        contentType\",\"$Lc8\",\" \",\"$Lc9\",\"$Lca\",\"\\n      \",\"$Lcb\",\"$Lcc\",\"$Lcd\",\"\\n      fs\",\"$Lce\",\"$Lcf\",\"$Ld0\",\"videoPath\",\"$Ld1\",\"$Ld2\",\"\\n      fs\",\"$Ld3\",\"$Ld4\",\"$Ld5\",\"outputPath\",\"$Ld6\",\"$Ld7\",\"\\n    \",\"$Ld8\",\" \",\"$Ld9\",\" \",\"$Lda\",\"err\",\"$Ldb\",\" \",\"$Ldc\",\"\\n      \",\"$Ldd\",\"$Lde\",\"$Ldf\",\"$Le0\",\"$Le1\",\"$Le2\",\" err\",\"$Le3\",\"$Le4\",\"\\n    \",\"$Le5\",\"\\n  \",\"$Le6\",\"$Le7\",\"\\n\",\"$Le8\",\"$Le9\",\"$Lea\",\"\\n\"]}]}]\n"])</script><script>self.__next_f.push([1,"31:[\"$\",\"p\",null,{\"children\":[\"Tests destructure \",[\"$\",\"code\",null,{\"children\":\"tutorialObj\"}],\" instead of the raw \",[\"$\",\"code\",null,{\"children\":\"tutorial\"}],\" boolean:\"]}]\n"])</script><script>self.__next_f.push([1,"32:[\"$\",\"pre\",null,{\"className\":\"language-typescript\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-typescript\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"test\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'add and complete a todo'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" tutorialObj\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" tutorial \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token arrow operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n  \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// tutorial is a fully configured Tutorial instance\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}]}]\n"])</script><script>self.__next_f.push([1,"33:[\"$\",\"h3\",null,{\"children\":\"Tutorial class: TTS dispatch\"}]\n34:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"Tutorial\"}],\" class gains a \",[\"$\",\"code\",null,{\"children\":\"_speak()\"}],\" dispatcher that routes to the correct backend:\"]}]\n"])</script><script>self.__next_f.push([1,"35:[\"$\",\"pre\",null,{\"className\":\"language-typescript\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-typescript\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// lib/tutorial.ts\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"private\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"_speak\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"text\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token builtin\",\"children\":\"string\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" options\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"SpeakOptions\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token known-class-name class-name\",\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"void\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n  \",[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"this\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"_ttsBackend\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"===\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'edge-tts'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"this\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"_speakEdgeTts\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"text\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" options\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n  \",[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"this\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"_speakWebSpeechApi\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"text\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" options\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]}]\n"])</script><script>self.__next_f.push([1,"36:[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Web Speech API backend\"}],\": entirely in the browser via \",[\"$\",\"code\",null,{\"children\":\"page.evaluate()\"}],\". Waits for voices to load, creates a \",[\"$\",\"code\",null,{\"children\":\"SpeechSynthesisUtterance\"}],\", and resolves when the utterance ends:\"]}]\n"])</script><script>self.__next_f.push([1,"37:[\"$\",\"pre\",null,{\"className\":\"language-typescript\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-typescript\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"private\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"_speakWebSpeechApi\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"text\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token builtin\",\"children\":\"string\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" options\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"SpeakOptions\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token known-class-name class-name\",\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"void\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n  \",[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"this\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"_page\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"evaluate\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" t\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" opts \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token arrow operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token known-class-name class-name\",\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"void\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"resolve\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token arrow operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n      \",[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token dom variable\",\"children\":\"window\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"speechSynthesis\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"getVoices\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"length\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"===\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n        \",[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token known-class-name class-name\",\"children\":\"Promise\"}],\"$Leb\",\"$Lec\",\"$Led\"]}],\"$Lee\",\"$Lef\",\"voicesReady\",\"$Lf0\",\" \",\"$Lf1\",\" \",\"$Lf2\",\"\\n          \",\"$Lf3\",\"$Lf4\",\"$Lf5\",\"$Lf6\",\"$Lf7\",\" \",\"$Lf8\",\" \",\"$Lf9\",\"$Lfa\",\" \",\"$Lfb\",\" \",\"$Lfc\",\"$Lfd\",\"$Lfe\",\"$Lff\",\"\\n          \",\"$L100\",\"$L101\",\"voicesReady\",\"$L102\",\" \",\"$L103\",\"$L104\",\"$L105\",\"\\n        \",\"$L106\",\"$L107\",\"$L108\",\"\\n      \",\"$L109\",\"\\n      \",\"$L10a\",\" \",\"$L10b\",\"$L10c\",\"$L10d\",\"$L10e\",\"$L10f\",\"$L110\",\"$L111\",\"$L112\",\"$L113\",\"$L114\",\" \",\"$L115\",\" \",\"$L116\",\"$L117\",\" \",\"$L118\",\"\\n        \",\"$L119\",\"$L11a\",\"$L11b\",\"$L11c\",\"\\n        \",\"$L11d\",\"$L11e\",\"\\n      \",\"$L11f\",\"\\n      \",\"$L120\",\" utterance \",\"$L121\",\" \",\"$L122\",\" \",\"$L123\",\"$L124\",\"t\",\"$L125\",\"$L126\",\"\\n      utterance\",\"$L127\",\"$L128\",\" \",\"$L129\",\" opts\",\"$L12a\",\"rate \",\"$L12b\",\" \",\"$L12c\",\"$L12d\",\"\\n      utterance\",\"$L12e\",\"$L12f\",\" \",\"$L130\",\" opts\",\"$L131\",\"pitch \",\"$L132\",\" \",\"$L133\",\"$L134\",\"\\n      \",\"$L135\",\" \",\"$L136\",\"opts\",\"$L137\",\"lang\",\"$L138\",\" utterance\",\"$L139\",\"$L13a\",\" \",\"$L13b\",\" opts\",\"$L13c\",\"$L13d\",\"$L13e\",\"\\n      \",\"$L13f\",\" timer \",\"$L140\",\" \",\"$L141\",\"$L142\",\"$L143\",\"$L144\",\" \",\"$L145\",\" \",\"$L146\",\"$L147\",\"$L148\",\"$L149\",\" \",\"$L14a\",\"$L14b\",\"$L14c\",\"\\n      utterance\",\"$L14d\",\"$L14e\",\" \",\"$L14f\",\" \",\"$L150\",\"$L151\",\" \",\"$L152\",\" \",\"$L153\",\" \",\"$L154\",\"$L155\",\"timer\",\"$L156\",\"$L157\",\" \",\"$L158\",\"$L159\",\"$L15a\",\"$L15b\",\" \",\"$L15c\",\"$L15d\",\"\\n      utterance\",\"$L15e\",\"$L15f\",\" \",\"$L160\",\" \",\"$L161\",\"$L162\",\" \",\"$L163\",\" \",\"$L164\",\" \",\"$L165\",\"$L166\",\"timer\",\"$L167\",\"$L168\",\" \",\"$L169\",\"$L16a\",\"$L16b\",\"$L16c\",\" \",\"$L16d\",\"$L16e\",\"\\n      \",\"$L16f\",\"$L170\",\"$L171\",\"$L172\",\"$L173\",\"$L174\",\"utterance\",\"$L175\",\"$L176\",\"\\n    \",\"$L177\",\"$L178\",\"$L179\",\"\\n  \",\"$L17a\",\"$L17b\",\" \",\"$L17c\",\" t\",\"$L17d\",\" text\",\"$L17e\",\" opts\",\"$L17f\",\" options \",\"$L180\",\"$L181\",\"$L182\",\"\\n\",\"$L183\",\"\\n\"]}]}]\n"])</script><script>self.__next_f.push([1,"38:[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Edge-tts backend\"}],\": on Node, then sends the base64-encoded MP3 to the browser for playback. Also saves the buffer and time offset for later video merging:\"]}]\n"])</script><script>self.__next_f.push([1,"39:[\"$\",\"pre\",null,{\"className\":\"language-typescript\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-typescript\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"private\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"_speakEdgeTts\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"text\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token builtin\",\"children\":\"string\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" options\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"SpeakOptions\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token known-class-name class-name\",\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"void\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n  \",[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"try\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" voice \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" options\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?.\"}],\"voice \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"??\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"DEFAULT_EDGE_TTS_VOICE\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" offsetMs \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"this\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"_startTime\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token known-class-name class-name\",\"children\":\"Date\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"now\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"this\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"_startTime\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" tts \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"EdgeTTS\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"await\"}],\" tts\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"synthesize\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"text\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" voice\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n      rate\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" options\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?.\"}],\"rate \",\"$L184\",\" \",\"$L185\",\"\\n        \",\"$L186\",\" \",\"$L187\",\"\\n        \",\"$L188\",\" \",\"$L189\",\"$L18a\",\"\\n      pitch\",\"$L18b\",\" options\",\"$L18c\",\"pitch \",\"$L18d\",\" \",\"$L18e\",\"\\n        \",\"$L18f\",\" \",\"$L190\",\"\\n        \",\"$L191\",\" \",\"$L192\",\"$L193\",\"\\n      outputFormat\",\"$L194\",\" \",\"$L195\",\"$L196\",\"\\n    \",\"$L197\",\"$L198\",\"$L199\",\"\\n    \",\"$L19a\",\" base64 \",\"$L19b\",\" \",\"$L19c\",\" tts\",\"$L19d\",\"$L19e\",\"$L19f\",\"$L1a0\",\"$L1a1\",\"\\n\\n    \",\"$L1a2\",\" \",\"$L1a3\",\"offsetMs \",\"$L1a4\",\" \",\"$L1a5\",\"$L1a6\",\" \",\"$L1a7\",\"\\n      \",\"$L1a8\",\"$L1a9\",\"$L1aa\",\"$L1ab\",\"$L1ac\",\"$L1ad\",\"$L1ae\",\" buffer\",\"$L1af\",\" \",\"$L1b0\",\"$L1b1\",\"$L1b2\",\"$L1b3\",\"base64\",\"$L1b4\",\" \",\"$L1b5\",\"$L1b6\",\"$L1b7\",\" offsetMs \",\"$L1b8\",\"$L1b9\",\"$L1ba\",\"\\n    \",\"$L1bb\",\"\\n\\n    \",\"$L1bc\",\" \",\"$L1bd\",\"$L1be\",\"$L1bf\",\"$L1c0\",\"$L1c1\",\"$L1c2\",\"$L1c3\",\"audioData\",\"$L1c4\",\" \",\"$L1c5\",\" \",\"$L1c6\",\"\\n      \",\"$L1c7\",\" \",\"$L1c8\",\" \",\"$L1c9\",\"$L1ca\",\"$L1cb\",\"resolve\",\"$L1cc\",\" \",\"$L1cd\",\" \",\"$L1ce\",\"\\n        \",\"$L1cf\",\" audio \",\"$L1d0\",\" \",\"$L1d1\",\" \",\"$L1d2\",\"$L1d3\",\"$L1d4\",\"$L1d5\",\"$L1d6\",\"\\n        \",\"$L1d7\",\" timer \",\"$L1d8\",\" \",\"$L1d9\",\"$L1da\",\"$L1db\",\"$L1dc\",\" \",\"$L1dd\",\" \",\"$L1de\",\"$L1df\",\"$L1e0\",\"$L1e1\",\" \",\"$L1e2\",\"$L1e3\",\"$L1e4\",\"\\n        audio\",\"$L1e5\",\"$L1e6\",\" \",\"$L1e7\",\" \",\"$L1e8\",\"$L1e9\",\" \",\"$L1ea\",\" \",\"$L1eb\",\" \",\"$L1ec\",\"$L1ed\",\"timer\",\"$L1ee\",\"$L1ef\",\" \",\"$L1f0\",\"$L1f1\",\"$L1f2\",\"$L1f3\",\" \",\"$L1f4\",\"$L1f5\",\"\\n        audio\",\"$L1f6\",\"$L1f7\",\" \",\"$L1f8\",\" \",\"$L1f9\",\"$L1fa\",\" \",\"$L1fb\",\" \",\"$L1fc\",\" \",\"$L1fd\",\"$L1fe\",\"timer\",\"$L1ff\",\"$L200\",\" \",\"$L201\",\"$L202\",\"$L203\",\"$L204\",\" \",\"$L205\",\"$L206\",\"\\n        audio\",\"$L207\",\"$L208\",\"$L209\",\"$L20a\",\"$L20b\",\"$L20c\",\"$L20d\",\"$L20e\",\"$L20f\",\" \",\"$L210\",\" \",\"$L211\",\" \",\"$L212\",\"$L213\",\"timer\",\"$L214\",\"$L215\",\" \",\"$L216\",\"$L217\",\"$L218\",\"$L219\",\" \",\"$L21a\",\"$L21b\",\"$L21c\",\"\\n      \",\"$L21d\",\"$L21e\",\"$L21f\",\"\\n    \",\"$L220\",\"$L221\",\" base64\",\"$L222\",\"$L223\",\"\\n  \",\"$L224\",\" \",\"$L225\",\" \",\"$L226\",\"\\n    \",\"$L227\",\"\\n  \",\"$L228\",\"\\n\",\"$L229\",\"\\n\"]}]}]\n"])</script><script>self.__next_f.push([1,"3a:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"try/catch\"}],\" around the entire edge-tts path means any failure (network error, invalid voice name, API outage) is silently swallowed. The test continues without narration.\"]}]\n3b:[\"$\",\"h2\",null,{\"children\":\"The ffmpeg merge pipeline\"}]\n3c:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"mergeAudioWithVideo()\"}],\" function in \",[\"$\",\"code\",null,{\"children\":\"lib/audio-merger.ts\"}],\" takes the recorded WebM video and an array of \",[\"$\",\"code\",null,{\"children\":\"AudioChunk\"}],\"s (each with a buffer and millisecond offset) and produces a new WebM with narration baked in.\"]}]\n3d:[\"$\",\"p\",null,{\"children\":\"Here's what happens step by step:\"}]\n3e:[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Probe the video duration with \",[\"$\",\"code\",null,{\"children\":\"ffprobe\"}],\" so the audio track spans the full video length.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Write each MP3 chunk to a temp file.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Build an ffmpeg filter graph that positions each chunk at its correct time offset using \",[\"$\",\"code\",null,{\"children\":\"adelay\"}],\" filters, mixes everything with \",[\"$\",\"code\",null,{\"children\":\"amix\"}],\", and adds a silent track to pad the full duration.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Copy the video stream (no re-encode) and encode the mixed audio as libopus for WebM.\"}],\"\\n\"]}]\n3f:[\"$\",\"p\",null,{\"children\":\"The generated ffmpeg command looks roughly like this for a test with three speech chunks:\"}]\n"])</script><script>self.__next_f.push([1,"40:[\"$\",\"pre\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":[\"ffmpeg -y \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n  -i \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"video-complete.webm\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"                     \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"# input 0: recorded video\"}],\"\\n  -f lavfi -t \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"45.2\"}],\" -i \",[\"$\",\"span\",null,{\"className\":\"token assign-left variable\",\"children\":\"anullsrc\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\"r\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"48000\"}],\":cl\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\"stereo \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"# input 1: silence for full duration\"}],\"\\n  -i \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"chunk-0.mp3\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"                              \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"# input 2: first speech chunk\"}],\"\\n  -i \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"chunk-1.mp3\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"                              \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"# input 3: second speech chunk\"}],\"\\n  -i \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"chunk-2.mp3\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"                              \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"# input 4: third speech chunk\"}],\"\\n  -filter_complex \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n    \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"[2:a]adelay=1200|1200[a0]; \\\\                  # chunk 0 starts at 1.2s\\n     [3:a]adelay=8500|8500[a1]; \\\\                  # chunk 1 starts at 8.5s\\n     [4:a]adelay=22000|22000[a2]; \\\\                # chunk 2 starts at 22s\\n     [1:a][a0][a1][a2]amix=inputs=4:normalize=0[aout]\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n  -map \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],\":v -map \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"[aout]\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"                        \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"# keep original video, use mixed audio\"}],\"\\n  -c:v copy -c:a libopus \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"                        \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"# no video re-encode, opus audio\"}],\"\\n  \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"video-narrated.webm\\\"\"}],\"\\n\"]}]}]\n"])</script><script>self.__next_f.push([1,"41:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"anullsrc\"}],\" silent track ensures \",[\"$\",\"code\",null,{\"children\":\"amix\"}],\" (with \",[\"$\",\"code\",null,{\"children\":\"duration=longest\"}],\") keeps the audio stream alive for the entire video. Without it, the audio track would end after the last speech chunk, leaving the rest of the video silent, or worse, causing ffmpeg to truncate.\"]}]\n42:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"normalize=0\"}],\" flag on \",[\"$\",\"code\",null,{\"children\":\"amix\"}],\" prevents automatic volume normalization that would amplify silence between chunks.\"]}]\n43:[\"$\",\"h2\",null,{\"children\":\"Running it\"}]\n44:[\"$\",\"p\",null,{\"children\":\"Three modes, same test code:\"}]\n45:[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Silent tests\"}],\" (CI, no highlights, no speech):\"]}]\n46:[\"$\",\"pre\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":[\"npx playwright \",[\"$\",\"span\",null,{\"className\":\"token builtin class-name\",\"children\":\"test\"}],\" --project\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\"chromium\\n\"]}]}]\n47:[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Web Speech API\"}],\" (live speech through speakers, no audio in recording):\"]}]\n48:[\"$\",\"pre\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token assign-left variable\",\"children\":\"TUTORIAL\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\" npx playwright \",[\"$\",\"span\",null,{\"className\":\"token builtin class-name\",\"children\":\"test\"}],\" --headed --project\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\"chromium\\n\"]}]}]\n49:[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Edge-tts\"}],\" (neural voices, narrated video output):\"]}]\n4a:[\"$\",\"pre\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token assign-left variable\",\"children\":\"TUTORIAL\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token assign-left variable\",\"children\":\"TTS\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\"edge-tts npx playwright \",[\"$\",\"span\",null,{\"className\":\"token builtin class-name\",\"children\":\"test\"}],\" --headed --project\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\"chromium\\n\"]}]}]\n4b:[\"$\",\"p\",null,{\"children\":\"After an edge-tts run, open the HTML report:\"}]\n4c:[\"$\",\"pre\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":\"npx playwright show-report\\n\"}]}]\n4d:[\"$\",\"p\",null,{\"children\":[\"Click into the test result, and you'll find a \",[\"$\",\"code\",null,{\"children\":\"narrated-video\"}],\" attachment, a WebM file with the original screen recording plus the synthesized narration mixed in at the correct timestamps.\"]}]\n4e:[\"$\",\"h2\",null,{\"children\":\"Failure modes\"}]\n4f:[\"$\",\"p\",null,{\"children\":\"Speech never breaks a test:\"}]\n"])</script><script>self.__next_f.push([1,"50:[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"No voices available\"}],\" (Web Speech API): \",[\"$\",\"code\",null,{\"children\":\"_speakWebSpeechApi\"}],\" waits up to 3 seconds for voices to load. If none appear, it resolves immediately. The highlight shows, the voice is silent.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Edge-tts fails\"}],\" (network error, bad voice name): The entire \",[\"$\",\"code\",null,{\"children\":\"_speakEdgeTts\"}],\" method is wrapped in \",[\"$\",\"code\",null,{\"children\":\"try/catch\"}],\". Any error is swallowed. The test continues.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"No ffmpeg on PATH\"}],\": The fixture teardown catches the \",[\"$\",\"code\",null,{\"children\":\"execSync\"}],\" error, logs a warning, and moves on. The test passes; you just don't get a narrated video.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"No \",[\"$\",\"code\",null,{\"children\":\"TUTORIAL\"}],\" env var\"]}],\": All \",[\"$\",\"code\",null,{\"children\":\"highlight()\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"speak()\"}],\" calls are no-ops. Zero overhead, zero side effects.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Safety timeout\"}],\": Both backends set a 30-second timeout on speech playback. If the \",[\"$\",\"code\",null,{\"children\":\"onended\"}],\" event never fires (browser bug, audio driver issue), the promise resolves after 30 seconds instead of hanging forever.\"]}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"51:[\"$\",\"h2\",null,{\"children\":\"What you get\"}]\n52:[\"$\",\"p\",null,{\"children\":[\"Add \",[\"$\",\"code\",null,{\"children\":\"speech\"}],\" fields to highlights you'd write anyway, throw in a \",[\"$\",\"code\",null,{\"children\":\"speak()\"}],\" call for transitions, and each edge-tts tutorial run produces a WebM with synchronized voice narration. Web Speech API is there for quick local previews; edge-tts with Microsoft neural voices is for the recordings you actually share.\"]}]\n53:[\"$\",\"p\",null,{\"children\":[\"Popover text and speech are independent, so you can write concise labels in popovers and natural sentences for narration. Without \",[\"$\",\"code\",null,{\"children\":\"TUTORIAL=1\"}],\", everything is still a no-op. No extra dependencies loaded, no slowdown, no network calls. And as covered above, if voices or ffmpeg aren't available, the test still passes.\"]}]\n54:[\"$\",\"p\",null,{\"children\":\"The test is still a test. It asserts correctness, runs in CI without modification, and breaks when the UI changes. The narration is just a layer on top.\"}]\n55:[\"$\",\"$L22a\",null,{\"children\":[\"$\",\"$59\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@22b\"}]}]\n"])</script><script>self.__next_f.push([1,"5c:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\n5d:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n5e:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n5f:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n60:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n61:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n62:[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// Teardown: merge audio chunks into the recorded video if applicable\"}]\n63:[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}]\n64:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}]\n65:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n66:[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"getAudioChunks\"}]\n67:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n68:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n69:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n6a:[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}]\n6b:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}]\n6c:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n6d:[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"env\"}]\n6e:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n6f:[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"TTS\"}]\n70:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"===\"}]\n71:[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'edge-tts'\"}]\n72:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n73:[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"if\"}]\n74:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n75:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"!\"}]\n76:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"||\"}]\n77:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"!\"}]\n78:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"||\"}]\n79:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n7a:[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"length\"}]\n7b:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"===\"}]\n7c:[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}]\n7d:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n7e:[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"return\"}]\n7f:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n80:[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}]\n81:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}]\n82:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n83:[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"video\"}]\n84:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n85:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n86:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n87:[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"if\"}]\n88:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n89:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"!\"}]\n8a:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n8b:[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"return\"}]\n8c:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n8d:[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"try\"}]\n8e:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}]\n8f:[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"await\"}]\n90:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n91:[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"close\"}]\n92:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n93:[\"$\",\"span\",null,{\"className\":\"token "])</script><script>self.__next_f.push([1,"punctuation\",\"children\":\")\"}]\n94:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n95:[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}]\n96:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}]\n97:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n98:[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"dirname\"}]\n99:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n9a:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n9b:[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"outputPath\"}]\n9c:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n9d:[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"''\"}]\n9e:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n9f:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\na0:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\na1:[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}]\na2:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}]\na3:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\na4:[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"join\"}]\na5:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\na6:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}]\na7:[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'video-complete.webm'\"}]\na8:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\na9:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\naa:[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"await\"}]\nab:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\nac:[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"saveAs\"}]\nad:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\nae:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\naf:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\nb0:[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}]\nb1:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}]\nb2:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\nb3:[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"join\"}]\nb4:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\nb5:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}]\nb6:[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'video-narrated.webm'\"}]\nb7:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\nb8:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\nb9:[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"mergeAudioWithVideo\"}]\nba:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\nbb:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}]\nbc:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}]\nbd:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\nbe:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\nbf:[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"await\"}]\nc0:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\nc1:[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"attach\"}]\nc2:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\nc3:[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'narrated-video'\"}]\nc4:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}]\nc5:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}]\nc6:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}]\nc7:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}]\nc8:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}]\nc9:[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'video/webm'\"}]\nca:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\""])</script><script>self.__next_f.push([1,"}]\ncb:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\ncc:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\ncd:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\nce:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\ncf:[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"unlinkSync\"}]\nd0:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\nd1:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\nd2:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\nd3:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\nd4:[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"unlinkSync\"}]\nd5:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\nd6:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\nd7:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\nd8:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\nd9:[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"catch\"}]\nda:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\ndb:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\ndc:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}]\ndd:[\"$\",\"span\",null,{\"className\":\"token console class-name\",\"children\":\"console\"}]\nde:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\ndf:[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"warn\"}]\ne0:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\ne1:[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'[tutorial] Failed to merge audio into video:'\"}]\ne2:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}]\ne3:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\ne4:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\ne5:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\ne6:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\ne7:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}]\ne8:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\ne9:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\nea:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\neb:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003c\"}]\nec:[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"void\"}]\ned:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e\"}]\nee:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\nef:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\nf0:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\nf1:[\"$\",\"span\",null,{\"className\":\"token arrow operator\",\"children\":\"=\u003e\"}]\nf2:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}]\nf3:[\"$\",\"span\",null,{\"className\":\"token dom variable\",\"children\":\"window\"}]\nf4:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\nf5:[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"speechSynthesis\"}]\nf6:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\nf7:[\"$\",\"span\",null,{\"className\":\"token method-variable function-variable method function property-access\",\"children\":\"onvoiceschanged\"}]\nf8:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}]\nf9:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\nfa:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\nfb:[\"$\",\"span\",null,{\"className\":\"token arrow operator\",\"children\":\"=\u003e\"}]\nfc:[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"voicesReady\"}]\nfd:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\nfe:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\nff:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n100:[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"setTimeout\"}]\n101:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"childre"])</script><script>self.__next_f.push([1,"n\":\"(\"}]\n102:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}]\n103:[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"3000\"}]\n104:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n105:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n106:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\n107:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n108:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n109:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\n10a:[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"if\"}]\n10b:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n10c:[\"$\",\"span\",null,{\"className\":\"token dom variable\",\"children\":\"window\"}]\n10d:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n10e:[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"speechSynthesis\"}]\n10f:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n110:[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"getVoices\"}]\n111:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n112:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n113:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n114:[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"length\"}]\n115:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"===\"}]\n116:[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}]\n117:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n118:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}]\n119:[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"resolve\"}]\n11a:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n11b:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n11c:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n11d:[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"return\"}]\n11e:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n11f:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\n120:[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}]\n121:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}]\n122:[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}]\n123:[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"SpeechSynthesisUtterance\"}]}]\n124:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n125:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n126:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n127:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n128:[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"rate\"}]\n129:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}]\n12a:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?.\"}]\n12b:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"??\"}]\n12c:[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1.0\"}]\n12d:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n12e:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n12f:[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"pitch\"}]\n130:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}]\n131:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?.\"}]\n132:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"??\"}]\n133:[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1.0\"}]\n134:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n135:[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"if\"}]\n136:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n137:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?.\"}]\n138:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n139:[\"$\",\"span"])</script><script>self.__next_f.push([1,"\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n13a:[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"lang\"}]\n13b:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}]\n13c:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n13d:[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"lang\"}]\n13e:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n13f:[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}]\n140:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}]\n141:[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"setTimeout\"}]\n142:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n143:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n144:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n145:[\"$\",\"span\",null,{\"className\":\"token arrow operator\",\"children\":\"=\u003e\"}]\n146:[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"resolve\"}]\n147:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n148:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n149:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}]\n14a:[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"30_000\"}]\n14b:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n14c:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n14d:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n14e:[\"$\",\"span\",null,{\"className\":\"token method-variable function-variable method function property-access\",\"children\":\"onend\"}]\n14f:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}]\n150:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n151:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n152:[\"$\",\"span\",null,{\"className\":\"token arrow operator\",\"children\":\"=\u003e\"}]\n153:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}]\n154:[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"clearTimeout\"}]\n155:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n156:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n157:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n158:[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"resolve\"}]\n159:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n15a:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n15b:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n15c:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\n15d:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n15e:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n15f:[\"$\",\"span\",null,{\"className\":\"token method-variable function-variable method function property-access\",\"children\":\"onerror\"}]\n160:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}]\n161:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n162:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n163:[\"$\",\"span\",null,{\"className\":\"token arrow operator\",\"children\":\"=\u003e\"}]\n164:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}]\n165:[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"clearTimeout\"}]\n166:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n167:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n168:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n169:[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"resolve\"}]\n16a:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n16b:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n16c:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n16d:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\n16e:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n16f:[\"$\",\"span\",null,{\"className\":\"token dom variable\",\"children\":\"window\"}]\n170:[\"$\",\"span\",null,{\"className\":\"t"])</script><script>self.__next_f.push([1,"oken punctuation\",\"children\":\".\"}]\n171:[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"speechSynthesis\"}]\n172:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n173:[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"speak\"}]\n174:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n175:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n176:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n177:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\n178:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n179:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n17a:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\n17b:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}]\n17c:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}]\n17d:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}]\n17e:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}]\n17f:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}]\n180:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\n181:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n182:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n183:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\n184:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"!==\"}]\n185:[\"$\",\"span\",null,{\"className\":\"token keyword nil\",\"children\":\"undefined\"}]\n186:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}]\n"])</script><script>self.__next_f.push([1,"187:[\"$\",\"span\",null,{\"className\":\"token template-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],\"options\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"rate\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'+'\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"''\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],[\"$\",\"span\",null,{\"className\":\"token known-class-name class-name\",\"children\":\"Math\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"round\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"options\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"rate\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"*\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"100\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"%\"}],[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}]]}]\n"])</script><script>self.__next_f.push([1,"188:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}]\n189:[\"$\",\"span\",null,{\"className\":\"token keyword nil\",\"children\":\"undefined\"}]\n18a:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}]\n18b:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}]\n18c:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?.\"}]\n18d:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"!==\"}]\n18e:[\"$\",\"span\",null,{\"className\":\"token keyword nil\",\"children\":\"undefined\"}]\n18f:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}]\n"])</script><script>self.__next_f.push([1,"190:[\"$\",\"span\",null,{\"className\":\"token template-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],\"options\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"pitch\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'+'\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"''\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],[\"$\",\"span\",null,{\"className\":\"token known-class-name class-name\",\"children\":\"Math\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"round\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"options\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"pitch\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"*\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"50\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"Hz\"}],[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}]]}]\n"])</script><script>self.__next_f.push([1,"191:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}]\n192:[\"$\",\"span\",null,{\"className\":\"token keyword nil\",\"children\":\"undefined\"}]\n193:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}]\n194:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}]\n195:[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"EDGE_TTS_FORMAT\"}]\n196:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}]\n197:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\n198:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n199:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n19a:[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}]\n19b:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}]\n19c:[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"await\"}]\n19d:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n19e:[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"toBase64\"}]\n19f:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n1a0:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n1a1:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n1a2:[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"if\"}]\n1a3:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n1a4:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e=\"}]\n1a5:[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}]\n1a6:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n1a7:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}]\n1a8:[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"this\"}]\n1a9:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n1aa:[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"_audioChunks\"}]\n1ab:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n1ac:[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"push\"}]\n1ad:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n1ae:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}]\n1af:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}]\n1b0:[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Buffer\"}]\n1b1:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n1b2:[\"$\",\"span\",null,{\"className\":\"token keyword module\",\"children\":\"from\"}]\n1b3:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n1b4:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}]\n1b5:[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'base64'\"}]\n1b6:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n1b7:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}]\n1b8:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\n1b9:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n1ba:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n1bb:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\n1bc:[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"await\"}]\n1bd:[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"this\"}]\n1be:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n1bf:[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"_page\"}]\n1c0:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n1c1:[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"evaluate\"}]\n1c2:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n1c3:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n1c4:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n1c5:[\"$\",\"span\",null,{\"className\":\"token arrow operator\",\"children\":\"=\u003e\"}]\n1c6:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}]\n1c7:[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"return\"}]\n1c8:[\"$\",\"span\",null,"])</script><script>self.__next_f.push([1,"{\"className\":\"token keyword\",\"children\":\"new\"}]\n1c9:[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token known-class-name class-name\",\"children\":\"Promise\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"void\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e\"}]]}]\n1ca:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n1cb:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n1cc:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n1cd:[\"$\",\"span\",null,{\"className\":\"token arrow operator\",\"children\":\"=\u003e\"}]\n1ce:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}]\n1cf:[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}]\n1d0:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}]\n1d1:[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}]\n1d2:[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Audio\"}]}]\n1d3:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n1d4:[\"$\",\"span\",null,{\"className\":\"token template-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"data:audio/mpeg;base64,\"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],\"audioData\",[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}]]}]\n1d5:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n1d6:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n1d7:[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}]\n1d8:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}]\n1d9:[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"setTimeout\"}]\n1da:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n1db:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n1dc:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n1dd:[\"$\",\"span\",null,{\"className\":\"token arrow operator\",\"children\":\"=\u003e\"}]\n1de:[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"resolve\"}]\n1df:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n1e0:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n1e1:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}]\n1e2:[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"30_000\"}]\n1e3:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n1e4:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n1e5:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n1e6:[\"$\",\"span\",null,{\"className\":\"token method-variable function-variable method function property-access\",\"children\":\"onended\"}]\n1e7:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}]\n1e8:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n1e9:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n1ea:[\"$\",\"span\",null,{\"className\":\"token arrow operator\",\"children\":\"=\u003e\"}]\n1eb:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}]\n1ec:[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"clearTimeout\"}]\n1ed:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n1ee:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n1ef:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n1f0:[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"resolve\"}]\n1f1:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n1f2:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n1f3:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n1f4:[\"$\",\"span\",null,{\"className\":\"token pun"])</script><script>self.__next_f.push([1,"ctuation\",\"children\":\"}\"}]\n1f5:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n1f6:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n1f7:[\"$\",\"span\",null,{\"className\":\"token method-variable function-variable method function property-access\",\"children\":\"onerror\"}]\n1f8:[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}]\n1f9:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n1fa:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n1fb:[\"$\",\"span\",null,{\"className\":\"token arrow operator\",\"children\":\"=\u003e\"}]\n1fc:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}]\n1fd:[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"clearTimeout\"}]\n1fe:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n1ff:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n200:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n201:[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"resolve\"}]\n202:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n203:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n204:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n205:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\n206:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n207:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n208:[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"play\"}]\n209:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n20a:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n20b:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]\n20c:[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"catch\"}]\n20d:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n20e:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n20f:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n210:[\"$\",\"span\",null,{\"className\":\"token arrow operator\",\"children\":\"=\u003e\"}]\n211:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}]\n212:[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"clearTimeout\"}]\n213:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n214:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n215:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n216:[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"resolve\"}]\n217:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}]\n218:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n219:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n21a:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\n21b:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n21c:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n21d:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\n21e:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n21f:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n220:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\n221:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}]\n222:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}]\n223:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}]\n224:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\n225:[\"$\",\"span\",null,{\"className\":\"token keyword control-flow\",\"children\":\"catch\"}]\n226:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}]\n227:[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// Graceful degradation: silently skip speech on failure\"}]\n228:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\n229:[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}]\n"])</script><script>self.__next_f.push([1,"57:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"22c:I[6869,[],\"IconMark\"]\n"])</script><script>self.__next_f.push([1,"5a:[[\"$\",\"title\",\"0\",{\"children\":\"Add Voice Narration to Your Playwright Tutorial Tests - MLgentDev\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"How to add TTS narration to Playwright tutorial tests with two backends: Web Speech API for live previews and edge-tts for producing narrated video artifacts.\"}],[\"$\",\"link\",\"2\",{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"https://mlgent.dev/feed.xml\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:title\",\"content\":\"Add Voice Narration to Your Playwright Tutorial Tests\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:description\",\"content\":\"How to add TTS narration to Playwright tutorial tests with two backends: Web Speech API for live previews and edge-tts for producing narrated video artifacts.\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:url\",\"content\":\"https://mlgent.dev/articles/adding-voice-narration-to-playwright-tutorials\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"7\",{\"property\":\"article:published_time\",\"content\":\"2026-02-23\"}],[\"$\",\"meta\",\"8\",{\"property\":\"article:author\",\"content\":\"MLgentDev\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"10\",{\"name\":\"twitter:title\",\"content\":\"Add Voice Narration to Your Playwright Tutorial Tests\"}],[\"$\",\"meta\",\"11\",{\"name\":\"twitter:description\",\"content\":\"How to add TTS narration to Playwright tutorial tests with two backends: Web Speech API for live previews and edge-tts for producing narrated video artifacts.\"}],[\"$\",\"link\",\"12\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?702e0b6334c10139\",\"type\":\"image/x-icon\",\"sizes\":\"48x48\"}],[\"$\",\"$L22c\",\"13\",{}]]\n"])</script><script>self.__next_f.push([1,"22b:null\n"])</script></body></html>